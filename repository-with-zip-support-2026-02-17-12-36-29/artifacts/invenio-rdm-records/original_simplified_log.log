 opensearch Pulling 
 rabbitmq Pulling 
 redis Pulling 
 postgresql Pulling 
 4f4fb700ef54 Already exists 
 4f4fb700ef54 Already exists 
 redis Pulled 
 rabbitmq Pulled 
 postgresql Pulled 
 opensearch Pulled 
 Network docker_services_cli_default  Creating
 Network docker_services_cli_default  Created
 Container docker_services_cli-postgresql-1  Creating
 Container docker_services_cli-rabbitmq-1  Creating
 Container docker_services_cli-opensearch-1  Creating
 Container docker_services_cli-redis-1  Creating
 Container docker_services_cli-postgresql-1  Created
 Container docker_services_cli-redis-1  Created
 Container docker_services_cli-rabbitmq-1  Created
 Container docker_services_cli-opensearch-1  Created
 Container docker_services_cli-rabbitmq-1  Starting
 Container docker_services_cli-postgresql-1  Starting
 Container docker_services_cli-opensearch-1  Starting
 Container docker_services_cli-redis-1  Starting
 Container docker_services_cli-postgresql-1  Started
 Container docker_services_cli-rabbitmq-1  Started
 Container docker_services_cli-redis-1  Started
 Container docker_services_cli-opensearch-1  Started
============================= test session starts ==============================
platform linux -- Python 3.14.2, pytest-8.4.2, pluggy-1.6.0
rootdir: /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original
configfile: setup.cfg
testpaths: docs, tests, invenio_rdm_records
plugins: mock-3.15.1, invenio-4.0.0, isort-4.0.0, flask-1.3.0, github-actions-annotate-failures-0.3.0, pydocstyle-2.4.0, Faker-40.4.0, cov-7.0.0, black-0.6.0, pycodestyle-2.5.0
collected 819 items
tests/contrib/codemeta/test_codemeta_custom_fields.py 
             [  0%]
tests/fixtures/load_error/test_vocabularies_load_error.py 
              [  0%]
tests/fixtures/test_cli.py 
                                         [  1%]
tests/fixtures/test_fixtures.py 
                                [  2%]
tests/oaiserver/test_oaipmh.py 
                                       [  2%]
tests/records/dumpers/test_access_dumpers.py 
s                          [  3%]
tests/records/dumpers/test_combined_subjects_dumper.py 
                 [  3%]
tests/records/dumpers/test_edtf_dumpers.py 
                     [  4%]
tests/records/dumpers/test_files_dumpers.py 
                            [  4%]
tests/records/dumpers/test_location_dumpers.py 
s                     [  5%]
tests/records/dumpers/test_pids_dumper.py 
                              [  5%]
tests/records/systemfields/test_access_systemfield.py 
 [  7%]
                                                                  [  8%]
tests/records/systemfields/test_permission_flags.py 
                  [  8%]
tests/records/systemfields/test_tombstone.py 
                     [  9%]
tests/records/test_api.py 
                                              [  9%]
tests/records/test_jsonschema.py 
   [ 14%]
tests/records/test_quotas.py 
                                          [ 14%]
tests/records/test_records_communities.py 
                              [ 14%]
tests/records/test_relations_affiliations.py 
                   [ 15%]
tests/records/test_relations_languages.py 
                           [ 16%]
tests/records/test_relations_resource_types.py 
                       [ 16%]
tests/records/test_relations_subjects.py 
                             [ 16%]
tests/requests/test_record_deletion.py 
                              [ 17%]
tests/requests/test_user_moderation_actions.py ::error file=workdir/tests/invenio-rdm-records/original/tests/requests/test_user_moderation_actions.py,line=84::test_user_moderation_approve%0A%0Ainvenio_records_resources.services.errors.PermissionDeniedError: action_accept
F
::error file=workdir/tests/invenio-rdm-records/original/tests/requests/test_user_moderation_actions.py,line=121::test_user_moderation_decline%0A%0Ainvenio_records_resources.services.errors.PermissionDeniedError: action_decline
F
                       [ 17%]
tests/resources/serializers/test_bibtex_serializer.py 
 [ 19%]
                                            [ 23%]
tests/resources/serializers/test_cff_serializer.py 
                     [ 23%]
tests/resources/serializers/test_csl_serializer.py 
                  [ 24%]
tests/resources/serializers/test_datacite43_serializer.py 
     [ 25%]
tests/resources/serializers/test_datacite45_serializer.py 
     [ 26%]
tests/resources/serializers/test_datapackage_serializer.py ...           [ 26%]
tests/resources/serializers/test_dcat_serializer.py 
                    [ 26%]
tests/resources/serializers/test_dublincore_serializer.py 
        [ 27%]
tests/resources/serializers/test_geojson_serializer.py ...               [ 28%]
tests/resources/serializers/test_marcxml_serializer.py 
                [ 28%]
tests/resources/serializers/test_schemaorg_serializer.py 
             [ 28%]
tests/resources/serializers/test_signposting_serializer.py 
         [ 29%]
tests/resources/serializers/test_ui_serializer.py 
                      [ 29%]
tests/resources/test_access_requests.py 
::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_access_requests.py,line=340::test_access_grant_for_role%0A%0Amarshmallow.exceptions.ValidationError: Could not find the specified subject
F
                            [ 30%]
tests/resources/test_draft_file_permissions.py 
::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_draft_file_permissions.py,line=501::test_metadata_only_records_disabled%0A%0Aassert 403 == 200%0A +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
F            [ 31%]
tests/resources/test_files.py 
::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_files.py,line=164::test_files_api_flow_for_deleted_record%0A%0Aassert 403 == 204%0A +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
F
::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_files.py,line=264::test_filename_with_slash_flow_for_deleted_record_%0A%0Aassert 403 == 204%0A +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
F
                                      [ 32%]
tests/resources/test_iiif_image_api.py 
                           [ 33%]
tests/resources/test_iiif_presentation_api.py 
                      [ 33%]
tests/resources/test_media_files.py 
::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_media_files.py,line=223::test_list_media_files_for_deleted_record%0A%0Aassert 403 == 204%0A +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
F
                                [ 34%]
tests/resources/test_publish_errors.py 
s                               [ 34%]
tests/resources/test_record_file_permissions.py 
                 [ 35%]
tests/resources/test_request_deletion.py 
::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_request_deletion.py,line=75::test_request_flow%0A%0Aassert 403 == 200%0A +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
F
::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_request_deletion.py,line=130::test_already_deleted%0A%0Ainvenio_records_resources.services.errors.PermissionDeniedError: delete
F
                           [ 36%]
tests/resources/test_resources.py 
::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_resources.py,line=512::test_restricted_records_disabled%0A%0Aassert 403 == 200%0A +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
Fss
::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_resources.py,line=972::test_search_internal_notes_fields%0A%0Amarshmallow_utils.permissions.FieldPermissionError: internal_notes
F               [ 39%]
tests/resources/test_resources_communities.py 
::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_resources_communities.py,line=930::test_restricted_record_creation%0A%0Ainvenio_rdm_records.services.errors.CommunityRequiredError
F
 [ 42%]
                                                                       [ 42%]
tests/resources/test_resources_community_records.py 
                [ 43%]
tests/resources/test_resources_oai.py ::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_resources_oai.py,line=81::test_create_set%0A%0Aassert 403 == 201%0A +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
F
::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_resources_oai.py,line=108::test_create_set_duplicate%0A%0Aassert 403 == 201%0A +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
F::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_resources_oai.py,line=119::test_create_set_invalid_data%0A%0Aassert 403 == 400%0A +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
F::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_resources_oai.py,line=147::test_get_set%0A%0Aassert 403 == 201%0A +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
F::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_resources_oai.py,line=169::test_get_set_not_existing%0A%0Aassert 403 == 404%0A +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
F::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_resources_oai.py,line=176::test_update_set%0A%0Aassert 403 == 201%0A +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
F::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_resources_oai.py,line=198::test_update_set_invalid_data%0A%0Aassert 403 == 201%0A +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
F::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_resources_oai.py,line=210::test_delete_set%0A%0Aassert 403 == 201%0A +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
F::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_resources_oai.py,line=218::test_delete_set_not_existing%0A%0Aassert 403 == 404%0A +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
F::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_resources_oai.py,line=230::test_search_sets%0A%0Aassert 403 == 201%0A +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
F::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_resources_oai.py,line=256::test_search_metadata_formats%0A%0Aassert 403 == 200%0A +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
F::error file=workdir/tests/invenio-rdm-records/original/tests/resources/test_resources_oai.py,line=268::test_links%0A%0Aassert 403 == 201%0A +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
F                       [ 44%]
tests/resources/test_resources_pids.py 
                            [ 45%]
tests/resources/test_resources_record_communities.py 
                  [ 45%]
tests/resources/test_resources_review.py 
                      [ 47%]
tests/resources/test_resources_search.py 
                               [ 47%]
tests/resources/test_resources_user_access.py 
                   [ 48%]
tests/resources/test_rocrate.py 
                                       [ 48%]
tests/resources/test_serialized_links.py 
                            [ 48%]
tests/resources/test_signposting.py 
                                  [ 49%]
tests/resources/vocabularies/test_affiliations_vocabulary.py 
          [ 49%]
tests/resources/vocabularies/test_awards_vocabulary.py 
                [ 49%]
tests/resources/vocabularies/test_funders_vocabulary.py 
               [ 50%]
tests/resources/vocabularies/test_names_vocabulary.py 
                 [ 50%]
tests/resources/vocabularies/test_subjects_vocabulary.py s
              [ 50%]
tests/secret_links/test_secret_links.py 
                        [ 51%]
tests/secret_links/test_sharing.py 
                                   [ 52%]
tests/secret_links/test_token_serializers.py 
                       [ 52%]
tests/services/components/test_access_component.py 
ssss
                [ 53%]
tests/services/components/test_internal_notes_component.py 
             [ 53%]
tests/services/components/test_metadata_component.py 
                   [ 53%]
tests/services/components/test_pids_component.py 
     [ 55%]
tests/services/components/test_relations_component.py 
                  [ 56%]
tests/services/components/test_signal_component.py 
                     [ 56%]
tests/services/components/test_verified_component.py 
::error file=workdir/tests/invenio-rdm-records/original/tests/services/components/test_verified_component.py,line=54::test_unverified_content%0A%0Aassert 0 == 1%0A +  where 0 = <invenio_requests.services.requests.results.RequestList object at 0x7fc3dc28bb60>.total
F
                  [ 56%]
tests/services/files/test_deleted_record_files.py 
                      [ 56%]
tests/services/files/test_metadata_files.py 
s                           [ 56%]
tests/services/files/test_revert_of_deleted_files_in_published_record.py . [ 56%]
                                                                         [ 56%]
tests/services/files/test_zip_listing_extraction.py ::error file=workdir/tests/invenio-rdm-records/original/tests/services/files/test_zip_listing_extraction.py,line=50::test_zip_file_listing%0A%0Amarshmallow.exceptions.ValidationError: Missing uploaded files. To disable files for this record please mark it as metadata-only
F
EEEEEEEE            [ 57%]
tests/services/pids/providers/test_datacite_pid_provider.py 
  [ 59%]
tests/services/pids/providers/test_external_pid_provider.py 
        [ 59%]
tests/services/pids/providers/test_oai_invenio_pid_provider.py 
       [ 60%]
tests/services/pids/test_pids_service.py 
    [ 63%]
tests/services/pids/test_pids_tasks.py 
                           [ 64%]
tests/services/schemas/test_access.py .........                          [ 65%]
tests/services/schemas/test_additional_description.py ......s            [ 66%]
tests/services/schemas/test_additional_title.py ......ss                 [ 67%]
tests/services/schemas/test_creator_contributor.py 
  [ 69%]
tests/services/schemas/test_dates.py 
                            [ 70%]
tests/services/schemas/test_formats.py 
                             [ 71%]
tests/services/schemas/test_funding.py 
                            [ 72%]
tests/services/schemas/test_identifier.py 
                        [ 73%]
tests/services/schemas/test_languages.py 
                              [ 73%]
tests/services/schemas/test_location.py 
                     [ 74%]
tests/services/schemas/test_metadata.py 
                              [ 75%]
tests/services/schemas/test_pids.py .....                                [ 75%]
tests/services/schemas/test_publication_date.py 
ss
               [ 76%]
tests/services/schemas/test_rdm_record_schema.py 
                      [ 77%]
tests/services/schemas/test_reference.py 
                         [ 78%]
tests/services/schemas/test_related_identifier.py 
             [ 79%]
tests/services/schemas/test_resource_type.py ...                         [ 79%]
tests/services/schemas/test_rights.py 
                     [ 81%]
tests/services/schemas/test_sizes.py 
                               [ 81%]
tests/services/schemas/test_version.py 
                              [ 82%]
tests/services/schemas/test_vocabulary.py ..                             [ 82%]
tests/services/test_deletion_policy.py 
                             [ 83%]
tests/services/test_generators.py 
                                [ 84%]
tests/services/test_oai_service.py 
                                  [ 84%]
tests/services/test_permissions_policy.py 
                             [ 84%]
tests/services/test_rdm_service.py 
                    [ 87%]
tests/services/test_record_deletion.py 
                               [ 87%]
tests/services/test_record_deletion_request.py 
                 [ 88%]
tests/services/test_service_access.py 
::error file=workdir/tests/invenio-rdm-records/original/tests/services/test_service_access.py,line=78::test_cant_create_multiple_grants_for_same_role%0A%0Amarshmallow.exceptions.ValidationError: Could not find the specified subject
F
::error file=workdir/tests/invenio-rdm-records/original/tests/services/test_service_access.py,line=315::test_read_grant_by_subjectid_provide_role%0A%0Amarshmallow.exceptions.ValidationError: Could not find the specified subject
F
::error file=workdir/tests/invenio-rdm-records/original/tests/services/test_service_access.py,line=426::test_delete_grant_by_subjectid_provide_role%0A%0Amarshmallow.exceptions.ValidationError: Could not find the specified subject
F
::error file=workdir/tests/invenio-rdm-records/original/tests/services/test_service_access.py,line=477::test_read_all_grants_by_subject_found%0A%0Amarshmallow.exceptions.ValidationError: Could not find the specified subject
F
::error file=workdir/tests/invenio-rdm-records/original/tests/services/test_service_access.py,line=510::test_read_all_grants_by_subject_not_found%0A%0Amarshmallow.exceptions.ValidationError: Could not find the specified subject
F
::error file=workdir/tests/invenio-rdm-records/original/tests/services/test_service_access.py,line=580::test_update_grant_by_subject_not_found%0A%0Amarshmallow.exceptions.ValidationError: Could not find the specified subject
F
                [ 90%]
tests/services/test_service_communities.py 
                           [ 91%]
tests/services/test_service_community_records.py 
              [ 92%]
tests/services/test_service_record_communities.py 
               [ 93%]
tests/services/test_service_review.py 
    [ 97%]
tests/services/test_service_tasks.py 
                                 [ 97%]
tests/services/test_sort.py 
                                            [ 97%]
tests/test_alembic.py s                                                  [ 97%]
tests/test_invenio_rdm_records.py 
                                     [ 98%]
tests/tokens/test_feature_flag.py 
                                      [ 98%]
tests/tokens/test_resource_access.py 
                     [100%]
==================================== ERRORS ====================================
__________________ ERROR at setup of test_zip_file_extraction __________________
self = <sqlalchemy.engine.base.Connection object at 0x7fc3db0666c0>
dialect = <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7fc3dbb96060>
context = <sqlalchemy.dialects.postgresql.psycopg2.PGExecutionContext_psycopg2 object at 0x7fc3ec87fc50>
statement = <sqlalchemy.dialects.postgresql.base.PGCompiler object at 0x7fc3ec632fd0>
parameters = [{'created': datetime.datetime(2026, 2, 17, 12, 54, 21, 406417, tzinfo=datetime.timezone.utc), 'description': None, 'id': 'bdfa3030-76ae-44e0-b853-10a70461ef8f', 'is_managed': True, ...}]
    def _exec_single_context(
        self,
        dialect: Dialect,
        context: ExecutionContext,
        statement: Union[str, Compiled],
        parameters: Optional[_AnyMultiExecuteParams],
    ) -> CursorResult[Any]:
        """continue the _execute_context() method for a single DBAPI
        cursor.execute() or cursor.executemany() call
        """
        if dialect.bind_typing is BindTyping.SETINPUTSIZES:
            generic_setinputsizes = context._prepare_set_input_sizes()
            if generic_setinputsizes:
                try:
                    dialect.do_set_input_sizes(
                        context.cursor, generic_setinputsizes, context
                    )
                except BaseException as e:
                    self._handle_dbapi_exception(
                        e, str(statement), parameters, None, context
                    )
        cursor, str_statement, parameters = (
            context.cursor,
            context.statement,
            context.parameters,
        )
        effective_parameters: Optional[_AnyExecuteParams]
        if not context.executemany:
            effective_parameters = parameters[0]
        else:
            effective_parameters = parameters
        if self._has_events or self.engine._has_events:
            for fn in self.dispatch.before_cursor_execute:
                str_statement, effective_parameters = fn(
                    self,
                    cursor,
                    str_statement,
                    effective_parameters,
                    context,
                    context.executemany,
                )
        if self._echo:
            self._log_info(str_statement)
            stats = context._get_cache_stats()
            if not self.engine.hide_parameters:
                self._log_info(
                    "[%s] %r",
                    stats,
                    sql_util._repr_params(
                        effective_parameters,
                        batches=10,
                        ismulti=context.executemany,
                    ),
                )
            else:
                self._log_info(
                    "[%s] [SQL parameters hidden due to hide_parameters=True]",
                    stats,
                )
        evt_handled: bool = False
        try:
            if context.execute_style is ExecuteStyle.EXECUTEMANY:
                effective_parameters = cast(
                    "_CoreMultiExecuteParams", effective_parameters
                )
                if self.dialect._has_events:
                    for fn in self.dialect.dispatch.do_executemany:
                        if fn(
                            cursor,
                            str_statement,
                            effective_parameters,
                            context,
                        ):
                            evt_handled = True
                            break
                if not evt_handled:
                    self.dialect.do_executemany(
                        cursor,
                        str_statement,
                        effective_parameters,
                        context,
                    )
            elif not effective_parameters and context.no_parameters:
                if self.dialect._has_events:
                    for fn in self.dialect.dispatch.do_execute_no_params:
                        if fn(cursor, str_statement, context):
                            evt_handled = True
                            break
                if not evt_handled:
                    self.dialect.do_execute_no_params(
                        cursor, str_statement, context
                    )
            else:
                effective_parameters = cast(
                    "_CoreSingleExecuteParams", effective_parameters
                )
                if self.dialect._has_events:
                    for fn in self.dialect.dispatch.do_execute:
                        if fn(
                            cursor,
                            str_statement,
                            effective_parameters,
                            context,
                        ):
                            evt_handled = True
                            break
                if not evt_handled:
>                   self.dialect.do_execute(
                        cursor, str_statement, effective_parameters, context
                    )
venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py:1967: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7fc3dbb96060>
cursor = <cursor object at 0x7fc3db067010; closed: -1>
statement = 'INSERT INTO accounts_role (id, name, description, is_managed, version_id, created, updated) VALUES (%(id)s, %(name)s, %(description)s, %(is_managed)s, %(version_id)s, %(created)s, %(updated)s)'
parameters = {'created': datetime.datetime(2026, 2, 17, 12, 54, 21, 406417, tzinfo=datetime.timezone.utc), 'description': None, 'id': 'bdfa3030-76ae-44e0-b853-10a70461ef8f', 'is_managed': True, ...}
context = <sqlalchemy.dialects.postgresql.psycopg2.PGExecutionContext_psycopg2 object at 0x7fc3ec87fc50>
    def do_execute(self, cursor, statement, parameters, context=None):
>       cursor.execute(statement, parameters)
E       psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "uq_accounts_role_name"
E       DETAIL:  Key (name)=(administration-access) already exists
venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py:952: UniqueViolation
The above exception was the direct cause of the following exception:
db = <SQLAlchemy postgresql+psycopg2://invenio:***@localhost:5432/invenio>
    @pytest.fixture()
    def admin_role_need(db):
        """Store 1 role with 'superuser-access' ActionNeed
        WHY: This is needed because expansion of ActionNeed is
             done on the basis of a User/Role being associated with that Need
             If no User/Role is associated with that Need (in the DB), the
             permission is expanded to an empty list
        """
        role = Role(name="administration-access")
        db.session.add(role)
        action_role = ActionRoles.create(action=administration_access_action, role=role)
        db.session.add(action_role)
>       db.session.commit()
tests/conftest.py:1831: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/sqlalchemy/orm/scoping.py:597: in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:2030: in commit
    trans.commit(_to_root=True)
venv/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:1311: in commit
    self._prepare_impl()
venv/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:1286: in _prepare_impl
    self.session.flush()
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
venv/lib/python3.14/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
venv/lib/python3.14/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
venv/lib/python3.14/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
venv/lib/python3.14/site-packages/sqlalchemy/orm/persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
venv/lib/python3.14/site-packages/sqlalchemy/sql/elements.py:527: in _execute_on_connection
    return connection._execute_clauseelement(
venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7fc3dbb96060>
cursor = <cursor object at 0x7fc3db067010; closed: -1>
statement = 'INSERT INTO accounts_role (id, name, description, is_managed, version_id, created, updated) VALUES (%(id)s, %(name)s, %(description)s, %(is_managed)s, %(version_id)s, %(created)s, %(updated)s)'
parameters = {'created': datetime.datetime(2026, 2, 17, 12, 54, 21, 406417, tzinfo=datetime.timezone.utc), 'description': None, 'id': 'bdfa3030-76ae-44e0-b853-10a70461ef8f', 'is_managed': True, ...}
context = <sqlalchemy.dialects.postgresql.psycopg2.PGExecutionContext_psycopg2 object at 0x7fc3ec87fc50>
    def do_execute(self, cursor, statement, parameters, context=None):
>       cursor.execute(statement, parameters)
E       sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_accounts_role_name"
E       DETAIL:  Key (name)=(administration-access) already exists
E       
E       [SQL: INSERT INTO accounts_role (id, name, description, is_managed, version_id, created, updated) VALUES (%(id)s, %(name)s, %(description)s, %(is_managed)s, %(version_id)s, %(created)s, %(updated)s)]
E       [parameters: {'id': 'bdfa3030-76ae-44e0-b853-10a70461ef8f', 'name': 'administration-access', 'description': None, 'is_managed': True, 'version_id': 1, 'created': datetime.datetime(2026, 2, 17, 12, 54, 21, 406417, tzinfo=datetime.timezone.utc), 'updated': datetime.datetime(2026, 2, 17, 12, 54, 21, 406420, tzinfo=datetime.timezone.utc)}]
E       (Background on this error at: https://sqlalche.me/e/20/gkpj)
venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py:952: IntegrityError
_________________ ERROR at setup of test_zip_folder_extraction _________________
db = <SQLAlchemy postgresql+psycopg2://invenio:***@localhost:5432/invenio>
    @pytest.fixture()
    def admin_role_need(db):
        """Store 1 role with 'superuser-access' ActionNeed
        WHY: This is needed because expansion of ActionNeed is
             done on the basis of a User/Role being associated with that Need
             If no User/Role is associated with that Need (in the DB), the
             permission is expanded to an empty list
        """
        role = Role(name="administration-access")
        db.session.add(role)
        action_role = ActionRoles.create(action=administration_access_action, role=role)
        db.session.add(action_role)
>       db.session.commit()
tests/conftest.py:1831: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/sqlalchemy/orm/scoping.py:597: in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:2030: in commit
    trans.commit(_to_root=True)
venv/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py:101: in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <sqlalchemy.orm.session.SessionTransaction object at 0x7fc3f63c8390>
operation_name = 'commit', state = <SessionTransactionState.DEACTIVE: 4>
    def _raise_for_prerequisite_state(
        self, operation_name: str, state: _StateChangeState
    ) -> NoReturn:
        if state is SessionTransactionState.DEACTIVE:
            if self._rollback_exception:
>               raise sa_exc.PendingRollbackError(
                    "This Session's transaction has been rolled back "
                    "due to a previous exception during flush."
                    " To begin a new transaction with this Session, "
                    "first issue Session.rollback()."
                    f" Original exception was: {self._rollback_exception}",
                    code="7s2a",
                )
E               sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_accounts_role_name"
E               DETAIL:  Key (name)=(administration-access) already exists
E               
E               [SQL: INSERT INTO accounts_role (id, name, description, is_managed, version_id, created, updated) VALUES (%(id)s, %(name)s, %(description)s, %(is_managed)s, %(version_id)s, %(created)s, %(updated)s)]
E               [parameters: {'id': 'bdfa3030-76ae-44e0-b853-10a70461ef8f', 'name': 'administration-access', 'description': None, 'is_managed': True, 'version_id': 1, 'created': datetime.datetime(2026, 2, 17, 12, 54, 21, 406417, tzinfo=datetime.timezone.utc), 'updated': datetime.datetime(2026, 2, 17, 12, 54, 21, 406420, tzinfo=datetime.timezone.utc)}]
E               (Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:971: PendingRollbackError
______________ ERROR at setup of test_large_zip_folder_extraction ______________
db = <SQLAlchemy postgresql+psycopg2://invenio:***@localhost:5432/invenio>
    @pytest.fixture()
    def admin_role_need(db):
        """Store 1 role with 'superuser-access' ActionNeed
        WHY: This is needed because expansion of ActionNeed is
             done on the basis of a User/Role being associated with that Need
             If no User/Role is associated with that Need (in the DB), the
             permission is expanded to an empty list
        """
        role = Role(name="administration-access")
        db.session.add(role)
        action_role = ActionRoles.create(action=administration_access_action, role=role)
        db.session.add(action_role)
>       db.session.commit()
tests/conftest.py:1831: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/sqlalchemy/orm/scoping.py:597: in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:2030: in commit
    trans.commit(_to_root=True)
venv/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py:101: in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <sqlalchemy.orm.session.SessionTransaction object at 0x7fc3f63c8390>
operation_name = 'commit', state = <SessionTransactionState.DEACTIVE: 4>
    def _raise_for_prerequisite_state(
        self, operation_name: str, state: _StateChangeState
    ) -> NoReturn:
        if state is SessionTransactionState.DEACTIVE:
            if self._rollback_exception:
>               raise sa_exc.PendingRollbackError(
                    "This Session's transaction has been rolled back "
                    "due to a previous exception during flush."
                    " To begin a new transaction with this Session, "
                    "first issue Session.rollback()."
                    f" Original exception was: {self._rollback_exception}",
                    code="7s2a",
                )
E               sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_accounts_role_name"
E               DETAIL:  Key (name)=(administration-access) already exists
E               
E               [SQL: INSERT INTO accounts_role (id, name, description, is_managed, version_id, created, updated) VALUES (%(id)s, %(name)s, %(description)s, %(is_managed)s, %(version_id)s, %(created)s, %(updated)s)]
E               [parameters: {'id': 'bdfa3030-76ae-44e0-b853-10a70461ef8f', 'name': 'administration-access', 'description': None, 'is_managed': True, 'version_id': 1, 'created': datetime.datetime(2026, 2, 17, 12, 54, 21, 406417, tzinfo=datetime.timezone.utc), 'updated': datetime.datetime(2026, 2, 17, 12, 54, 21, 406420, tzinfo=datetime.timezone.utc)}]
E               (Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:971: PendingRollbackError
________________ ERROR at setup of test_large_zip_memory_usage _________________
db = <SQLAlchemy postgresql+psycopg2://invenio:***@localhost:5432/invenio>
    @pytest.fixture()
    def admin_role_need(db):
        """Store 1 role with 'superuser-access' ActionNeed
        WHY: This is needed because expansion of ActionNeed is
             done on the basis of a User/Role being associated with that Need
             If no User/Role is associated with that Need (in the DB), the
             permission is expanded to an empty list
        """
        role = Role(name="administration-access")
        db.session.add(role)
        action_role = ActionRoles.create(action=administration_access_action, role=role)
        db.session.add(action_role)
>       db.session.commit()
tests/conftest.py:1831: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/sqlalchemy/orm/scoping.py:597: in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:2030: in commit
    trans.commit(_to_root=True)
venv/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py:101: in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <sqlalchemy.orm.session.SessionTransaction object at 0x7fc3f63c8390>
operation_name = 'commit', state = <SessionTransactionState.DEACTIVE: 4>
    def _raise_for_prerequisite_state(
        self, operation_name: str, state: _StateChangeState
    ) -> NoReturn:
        if state is SessionTransactionState.DEACTIVE:
            if self._rollback_exception:
>               raise sa_exc.PendingRollbackError(
                    "This Session's transaction has been rolled back "
                    "due to a previous exception during flush."
                    " To begin a new transaction with this Session, "
                    "first issue Session.rollback()."
                    f" Original exception was: {self._rollback_exception}",
                    code="7s2a",
                )
E               sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_accounts_role_name"
E               DETAIL:  Key (name)=(administration-access) already exists
E               
E               [SQL: INSERT INTO accounts_role (id, name, description, is_managed, version_id, created, updated) VALUES (%(id)s, %(name)s, %(description)s, %(is_managed)s, %(version_id)s, %(created)s, %(updated)s)]
E               [parameters: {'id': 'bdfa3030-76ae-44e0-b853-10a70461ef8f', 'name': 'administration-access', 'description': None, 'is_managed': True, 'version_id': 1, 'created': datetime.datetime(2026, 2, 17, 12, 54, 21, 406417, tzinfo=datetime.timezone.utc), 'updated': datetime.datetime(2026, 2, 17, 12, 54, 21, 406420, tzinfo=datetime.timezone.utc)}]
E               (Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:971: PendingRollbackError
_________________ ERROR at setup of test_zip_listing_resource __________________
db = <SQLAlchemy postgresql+psycopg2://invenio:***@localhost:5432/invenio>
    @pytest.fixture()
    def admin_role_need(db):
        """Store 1 role with 'superuser-access' ActionNeed
        WHY: This is needed because expansion of ActionNeed is
             done on the basis of a User/Role being associated with that Need
             If no User/Role is associated with that Need (in the DB), the
             permission is expanded to an empty list
        """
        role = Role(name="administration-access")
        db.session.add(role)
        action_role = ActionRoles.create(action=administration_access_action, role=role)
        db.session.add(action_role)
>       db.session.commit()
tests/conftest.py:1831: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/sqlalchemy/orm/scoping.py:597: in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:2030: in commit
    trans.commit(_to_root=True)
venv/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py:101: in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <sqlalchemy.orm.session.SessionTransaction object at 0x7fc3f63c8390>
operation_name = 'commit', state = <SessionTransactionState.DEACTIVE: 4>
    def _raise_for_prerequisite_state(
        self, operation_name: str, state: _StateChangeState
    ) -> NoReturn:
        if state is SessionTransactionState.DEACTIVE:
            if self._rollback_exception:
>               raise sa_exc.PendingRollbackError(
                    "This Session's transaction has been rolled back "
                    "due to a previous exception during flush."
                    " To begin a new transaction with this Session, "
                    "first issue Session.rollback()."
                    f" Original exception was: {self._rollback_exception}",
                    code="7s2a",
                )
E               sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_accounts_role_name"
E               DETAIL:  Key (name)=(administration-access) already exists
E               
E               [SQL: INSERT INTO accounts_role (id, name, description, is_managed, version_id, created, updated) VALUES (%(id)s, %(name)s, %(description)s, %(is_managed)s, %(version_id)s, %(created)s, %(updated)s)]
E               [parameters: {'id': 'bdfa3030-76ae-44e0-b853-10a70461ef8f', 'name': 'administration-access', 'description': None, 'is_managed': True, 'version_id': 1, 'created': datetime.datetime(2026, 2, 17, 12, 54, 21, 406417, tzinfo=datetime.timezone.utc), 'updated': datetime.datetime(2026, 2, 17, 12, 54, 21, 406420, tzinfo=datetime.timezone.utc)}]
E               (Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:971: PendingRollbackError
_______________ ERROR at setup of test_zip_file_extract_resource _______________
db = <SQLAlchemy postgresql+psycopg2://invenio:***@localhost:5432/invenio>
    @pytest.fixture()
    def admin_role_need(db):
        """Store 1 role with 'superuser-access' ActionNeed
        WHY: This is needed because expansion of ActionNeed is
             done on the basis of a User/Role being associated with that Need
             If no User/Role is associated with that Need (in the DB), the
             permission is expanded to an empty list
        """
        role = Role(name="administration-access")
        db.session.add(role)
        action_role = ActionRoles.create(action=administration_access_action, role=role)
        db.session.add(action_role)
>       db.session.commit()
tests/conftest.py:1831: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/sqlalchemy/orm/scoping.py:597: in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:2030: in commit
    trans.commit(_to_root=True)
venv/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py:101: in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <sqlalchemy.orm.session.SessionTransaction object at 0x7fc3f63c8390>
operation_name = 'commit', state = <SessionTransactionState.DEACTIVE: 4>
    def _raise_for_prerequisite_state(
        self, operation_name: str, state: _StateChangeState
    ) -> NoReturn:
        if state is SessionTransactionState.DEACTIVE:
            if self._rollback_exception:
>               raise sa_exc.PendingRollbackError(
                    "This Session's transaction has been rolled back "
                    "due to a previous exception during flush."
                    " To begin a new transaction with this Session, "
                    "first issue Session.rollback()."
                    f" Original exception was: {self._rollback_exception}",
                    code="7s2a",
                )
E               sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_accounts_role_name"
E               DETAIL:  Key (name)=(administration-access) already exists
E               
E               [SQL: INSERT INTO accounts_role (id, name, description, is_managed, version_id, created, updated) VALUES (%(id)s, %(name)s, %(description)s, %(is_managed)s, %(version_id)s, %(created)s, %(updated)s)]
E               [parameters: {'id': 'bdfa3030-76ae-44e0-b853-10a70461ef8f', 'name': 'administration-access', 'description': None, 'is_managed': True, 'version_id': 1, 'created': datetime.datetime(2026, 2, 17, 12, 54, 21, 406417, tzinfo=datetime.timezone.utc), 'updated': datetime.datetime(2026, 2, 17, 12, 54, 21, 406420, tzinfo=datetime.timezone.utc)}]
E               (Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:971: PendingRollbackError
______________ ERROR at setup of test_zip_folder_extract_resource ______________
db = <SQLAlchemy postgresql+psycopg2://invenio:***@localhost:5432/invenio>
    @pytest.fixture()
    def admin_role_need(db):
        """Store 1 role with 'superuser-access' ActionNeed
        WHY: This is needed because expansion of ActionNeed is
             done on the basis of a User/Role being associated with that Need
             If no User/Role is associated with that Need (in the DB), the
             permission is expanded to an empty list
        """
        role = Role(name="administration-access")
        db.session.add(role)
        action_role = ActionRoles.create(action=administration_access_action, role=role)
        db.session.add(action_role)
>       db.session.commit()
tests/conftest.py:1831: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/sqlalchemy/orm/scoping.py:597: in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:2030: in commit
    trans.commit(_to_root=True)
venv/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py:101: in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <sqlalchemy.orm.session.SessionTransaction object at 0x7fc3f63c8390>
operation_name = 'commit', state = <SessionTransactionState.DEACTIVE: 4>
    def _raise_for_prerequisite_state(
        self, operation_name: str, state: _StateChangeState
    ) -> NoReturn:
        if state is SessionTransactionState.DEACTIVE:
            if self._rollback_exception:
>               raise sa_exc.PendingRollbackError(
                    "This Session's transaction has been rolled back "
                    "due to a previous exception during flush."
                    " To begin a new transaction with this Session, "
                    "first issue Session.rollback()."
                    f" Original exception was: {self._rollback_exception}",
                    code="7s2a",
                )
E               sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_accounts_role_name"
E               DETAIL:  Key (name)=(administration-access) already exists
E               
E               [SQL: INSERT INTO accounts_role (id, name, description, is_managed, version_id, created, updated) VALUES (%(id)s, %(name)s, %(description)s, %(is_managed)s, %(version_id)s, %(created)s, %(updated)s)]
E               [parameters: {'id': 'bdfa3030-76ae-44e0-b853-10a70461ef8f', 'name': 'administration-access', 'description': None, 'is_managed': True, 'version_id': 1, 'created': datetime.datetime(2026, 2, 17, 12, 54, 21, 406417, tzinfo=datetime.timezone.utc), 'updated': datetime.datetime(2026, 2, 17, 12, 54, 21, 406420, tzinfo=datetime.timezone.utc)}]
E               (Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:971: PendingRollbackError
____________ ERROR at teardown of test_zip_folder_extract_resource _____________
database = <SQLAlchemy>
    @pytest.yield_fixture(scope="module")
    def location(database):
        """Creates a simple default location for a test
        Scope: function
        Use this fixture if your test requires a `files location <https://invenio-
        files-rest.readthedocs.io/en/latest/api.html#invenio_files_rest.models
        Location>`_. The location will be a default location with the name
        ``pytest-location``
        """
        from invenio_files_rest.models import Location
        uri = tempfile.mkdtemp()
        location_obj = Location(name="pytest-location", uri=uri, default=True)
        database.session.add(location_obj)
        database.session.commit()
        yield location_obj
>       shutil.rmtree(location_obj.uri)
                      ^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/pytest_invenio/fixtures.py:752: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/sqlalchemy/orm/attributes.py:569: in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/sqlalchemy/orm/attributes.py:1096: in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/sqlalchemy/orm/attributes.py:1126: in _fire_loader_callables
    return state._load_expired(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/sqlalchemy/orm/state.py:828: in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
venv/lib/python3.14/site-packages/sqlalchemy/orm/loading.py:1674: in load_scalar_attributes
    result = load_on_ident(
venv/lib/python3.14/site-packages/sqlalchemy/orm/loading.py:510: in load_on_ident
    return load_on_pk_identity(
venv/lib/python3.14/site-packages/sqlalchemy/orm/loading.py:695: in load_on_pk_identity
    session.execute(
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:2351: in execute
    return self._execute_internal(
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:2228: in _execute_internal
    ) = compile_state_cls.orm_pre_session_exec(
venv/lib/python3.14/site-packages/sqlalchemy/orm/context.py:577: in orm_pre_session_exec
    session._autoflush()
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:3040: in _autoflush
    self.flush()
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:4359: in _flush
    self.dispatch.before_flush(self, flush_context, objects)
venv/lib/python3.14/site-packages/sqlalchemy/event/attr.py:387: in __call__
    fn(*args, **kw)
venv/lib/python3.14/site-packages/sqlalchemy_continuum/manager.py:349: in before_flush
    uow = self.unit_of_work(session)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/sqlalchemy_continuum/manager.py:308: in unit_of_work
    conn = session.connection()
           ^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:2092: in connection
    return self._connection_for_bind(
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:2108: in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/sqlalchemy/orm/state_changes.py:101: in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <sqlalchemy.orm.session.SessionTransaction object at 0x7fc3f63c8390>
operation_name = '_connection_for_bind'
state = <SessionTransactionState.DEACTIVE: 4>
    def _raise_for_prerequisite_state(
        self, operation_name: str, state: _StateChangeState
    ) -> NoReturn:
        if state is SessionTransactionState.DEACTIVE:
            if self._rollback_exception:
>               raise sa_exc.PendingRollbackError(
                    "This Session's transaction has been rolled back "
                    "due to a previous exception during flush."
                    " To begin a new transaction with this Session, "
                    "first issue Session.rollback()."
                    f" Original exception was: {self._rollback_exception}",
                    code="7s2a",
                )
E               sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_accounts_role_name"
E               DETAIL:  Key (name)=(administration-access) already exists
E               
E               [SQL: INSERT INTO accounts_role (id, name, description, is_managed, version_id, created, updated) VALUES (%(id)s, %(name)s, %(description)s, %(is_managed)s, %(version_id)s, %(created)s, %(updated)s)]
E               [parameters: {'id': 'bdfa3030-76ae-44e0-b853-10a70461ef8f', 'name': 'administration-access', 'description': None, 'is_managed': True, 'version_id': 1, 'created': datetime.datetime(2026, 2, 17, 12, 54, 21, 406417, tzinfo=datetime.timezone.utc), 'updated': datetime.datetime(2026, 2, 17, 12, 54, 21, 406420, tzinfo=datetime.timezone.utc)}]
E               (Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
venv/lib/python3.14/site-packages/sqlalchemy/orm/session.py:971: PendingRollbackError
=================================== FAILURES ===================================
_________________________ test_user_moderation_approve _________________________
running_app = RunningApp(app=<Flask 'invenio'>, superuser_identity=<Identity id="2" auth_type="None" provides={Need(method='system_r...ices.records.results.RecordItem object at 0x7fc3f24a0870>}, moderator_role=<Role 7f32e772-31e9-45f3-99c4-82e44106f96a>)
mod_identity = <Identity id="1" auth_type="None" provides={Need(method='system_role', value='authenticated_user'), Need(method='role', value='administration-moderation')}>
unverified_user = <pytest_invenio.user.UserFixtureBase object at 0x7fc3f2305390>
search_clear = <OpenSearch([{'host': 'localhost', 'port': 9200}])>
minimal_record = {'access': {'files': 'public', 'record': 'public'}, 'files': {'enabled': False}, 'metadata': {'creators': [{'person_or...], 'publication_date': '2020-06-01', 'publisher': 'Acme Inc', 'resource_type': {'id': 'image-photo'}, ...}, 'pids': {}}
mocker = <pytest_mock.plugin.MockerFixture object at 0x7fc3f23441a0>
    def test_user_moderation_approve(
        running_app, mod_identity, unverified_user, search_clear, minimal_record, mocker
    ):
        """Tests moderation action after user approval
        The user records, and all its versions, should have a "is_verified" field set to "True"
        """
        user_records_q = f"parent.access.owned_by.user:{unverified_user.id}"
        # Create a record
        draft = records_service.create(unverified_user.identity, minimal_record)
        record = records_service.publish(id_=draft.id, identity=unverified_user.identity)
        # Create a new version of the record
        new_version = records_service.new_version(unverified_user.identity, id_=record.id)
        records_service.update_draft(
            unverified_user.identity, new_version.id, minimal_record
        )
        # Since tasks are executed synchronously in tests, the db session used for publishing is rolledback
        # This is a patch for tests only
        mocker.patch(
            "invenio_rdm_records.services.components.verified.request_moderation",
            MockRequestModerationTask(),
        )
        new_record = records_service.publish(
            identity=unverified_user.identity, id_=new_version.id
        )
        pre_approval_records = records_service.search(
            system_identity, params={"q": user_records_q, "allversions": True}
        )
        assert pre_approval_records.total == 2
        hits = pre_approval_records.to_dict()["hits"]["hits"]
        is_verified = all([hit["parent"]["is_verified"] for hit in hits])
        assert is_verified is False
        # Fetch moderation request that was created on publish
        res = current_requests_service.search(
            system_identity, params={"q": f"topic.user:{unverified_user.id}"}
        )
        assert res.total == 1
        mod_request = res.to_dict()["hits"]["hits"][0]
        # Approve user, records are verified from now on
>       current_requests_service.execute_action(
            mod_identity, id_=mod_request["id"], action="accept"
        )
tests/requests/test_user_moderation_actions.py:84: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/invenio_db/uow.py:251: in inner
    res = f(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py:244: in execute_action
    self.require_permission(identity, permission_name, request=request)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <invenio_requests.services.requests.service.RequestsService object at 0x7fc3f2f00e10>
identity = <Identity id="1" auth_type="None" provides={Need(method='system_role', value='authenticated_user'), Need(method='role', value='administration-moderation')}>
action_name = 'action_accept'
kwargs = {'request': {'type': 'user-moderation', 'topic': {'user': '3'}, 'status': 'submitted', '$schema': 'local://requests/re...': {'group': '7f32e772-31e9-45f3-99c4-82e44106f96a'}, 'created_by': {'group': '7f32e772-31e9-45f3-99c4-82e44106f96a'}}}
    def require_permission(self, identity, action_name, **kwargs):
        """Require a specific permission from the permission policy
        Like `check_permission` but raises an error if not allowed
        """
        if not self.check_permission(identity, action_name, **kwargs):
>           raise PermissionDeniedError(action_name)
E           invenio_records_resources.services.errors.PermissionDeniedError: action_accept
venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py:51: PermissionDeniedError
---------------------------- Captured stderr setup -----------------------------
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
[2026-02-17 12:46:59,432] DEBUG in ext: Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
[2026-02-17 12:47:00,445] DEBUG in ext: Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
------------------------------ Captured log setup ------------------------------
DEBUG    invenio:ext.py:99 Flask-DebugToolbar extension not installed
DEBUG    invenio:ext.py:99 Flask-DebugToolbar extension not installed
----------------------------- Captured stderr call -----------------------------
'record-view'
'record-view'
[2026-02-17 12:47:04,585] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:47:04,585] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-view'
'record-view'
[2026-02-17 12:47:05,005] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:47:05,005] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-view'
'record-view'
[2026-02-17 12:47:05,255] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:47:05,255] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-view'
'record-view'
[2026-02-17 12:47:05,269] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:47:05,269] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
------------------------------ Captured log call -------------------------------
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
_________________________ test_user_moderation_decline _________________________
running_app = RunningApp(app=<Flask 'invenio'>, superuser_identity=<Identity id="4" auth_type="None" provides={Need(method='id', val...ices.records.results.RecordItem object at 0x7fc3f24a0870>}, moderator_role=<Role 7f32e772-31e9-45f3-99c4-82e44106f96a>)
mod_identity = <Identity id="1" auth_type="None" provides={Need(method='system_role', value='authenticated_user'), Need(method='role', value='administration-moderation')}>
unverified_user = <pytest_invenio.user.UserFixtureBase object at 0x7fc3f20dda70>
search_clear = <OpenSearch([{'host': 'localhost', 'port': 9200}])>
minimal_record = {'access': {'files': 'public', 'record': 'public'}, 'files': {'enabled': False}, 'metadata': {'creators': [{'person_or...], 'publication_date': '2020-06-01', 'publisher': 'Acme Inc', 'resource_type': {'id': 'image-photo'}, ...}, 'pids': {}}
mocker = <pytest_mock.plugin.MockerFixture object at 0x7fc3f20e1950>
    def test_user_moderation_decline(
        running_app, mod_identity, unverified_user, search_clear, minimal_record, mocker
    ):
        """Tests user moderation action after decline
        All of the user's records should be deleted
        """
        # Create a record
        draft = records_service.create(unverified_user.identity, minimal_record)
        record = records_service.publish(id_=draft.id, identity=unverified_user.identity)
        assert not record._record.deletion_status.is_deleted
        assert record._record.tombstone is None
        # Fetch moderation request that was created on publish and decline the user
        res = current_requests_service.search(
            system_identity, params={"q": f"topic.user:{unverified_user.id}"}
        )
        assert res.total == 1
        mod_request = res.to_dict()["hits"]["hits"][0]
>       current_requests_service.execute_action(
            mod_identity, id_=mod_request["id"], action="decline"
        )
tests/requests/test_user_moderation_actions.py:121: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/invenio_db/uow.py:251: in inner
    res = f(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py:244: in execute_action
    self.require_permission(identity, permission_name, request=request)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <invenio_requests.services.requests.service.RequestsService object at 0x7fc3f2f00e10>
identity = <Identity id="1" auth_type="None" provides={Need(method='system_role', value='authenticated_user'), Need(method='role', value='administration-moderation')}>
action_name = 'action_decline'
kwargs = {'request': {'type': 'user-moderation', 'topic': {'user': '5'}, 'status': 'submitted', '$schema': 'local://requests/re...': {'group': '7f32e772-31e9-45f3-99c4-82e44106f96a'}, 'created_by': {'group': '7f32e772-31e9-45f3-99c4-82e44106f96a'}}}
    def require_permission(self, identity, action_name, **kwargs):
        """Require a specific permission from the permission policy
        Like `check_permission` but raises an error if not allowed
        """
        if not self.check_permission(identity, action_name, **kwargs):
>           raise PermissionDeniedError(action_name)
E           invenio_records_resources.services.errors.PermissionDeniedError: action_decline
venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py:51: PermissionDeniedError
---------------------------- Captured stderr setup -----------------------------
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
[2026-02-17 12:47:06,464] ERROR in api: Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
------------------------------ Captured log setup ------------------------------
ERROR    invenio:api.py:376 Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
----------------------------- Captured stderr call -----------------------------
'record-view'
'record-view'
[2026-02-17 12:47:06,851] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:47:06,851] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
------------------------------ Captured log call -------------------------------
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
__________________________ test_access_grant_for_role __________________________
running_app = RunningApp(app=<Flask 'invenio'>, superuser_identity=<Identity id="13" auth_type="None" provides={Need(method='system_...ices.records.results.RecordItem object at 0x7fc3efbdcd70>}, moderator_role=<Role 8ca14841-b91f-4264-891d-633a20e7b6cd>)
client = <FlaskClient <Flask 'invenio'>>, users = [<User 14>, <User 15>]
roles = [<Role 68820586-2a95-4936-87d0-59495d9416c5>, <Role 4690f8ef-b752-4fb4-9f11-c3025186d702>]
minimal_restricted_record = {'access': {'files': 'restricted', 'record': 'restricted'}, 'files': {'enabled': False}, 'metadata': {'creators': [{'p...], 'publication_date': '2020-06-01', 'publisher': 'Acme Inc', 'resource_type': {'id': 'image-photo'}, ...}, 'pids': {}}
    def test_access_grant_for_role(
        running_app,
        client,
        users,
        roles,
        minimal_restricted_record,
    ):
        """Test whether we can grant access permissions to groups of users."""
        # Log in a user (wo we need to add to a group)
        user, role = users[-1], roles[-1]
        current_datastore.add_role_to_user(user, role)
        db.session.commit()
        login_user(user)
        login_user_via_session(client, email=user.email)
        # Create a restricted record
        draft = service.create(identity=system_identity, data=minimal_restricted_record)
        record = service.publish(identity=system_identity, id_=draft.id)
        response = client.get(f"/records/{record.id}")
        assert response.status_code == 403
        # Grant access to users with a specific role (i.e. in a specific group)
>       service.access.bulk_create_grants(
            identity=system_identity,
            id_=record.id,
            data={
                "grants": [
                    {
                        "subject": {
                            "type": "role",
                            "id": str(role.name),
                        },
                        "permission": "view",
                    }
                ]
            },
        )
tests/resources/test_access_requests.py:340: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/invenio_db/uow.py:251: in inner
    res = f(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <invenio_rdm_records.services.access.service.RecordAccessService object at 0x7fc3f3467530>
identity = <Identity id="system" auth_type="None" provides={Need(method='system_role', value='system_process')}>
id_ = '9g1vt-mn881'
data = {'grants': [{'permission': 'view', 'subject': {'id': 'strong', 'type': 'role'}}]}
expand = False, uow = <invenio_db.uow.UnitOfWork object at 0x7fc3edc3bef0>
    @unit_of_work()
    def bulk_create_grants(self, identity, id_, data, expand=False, uow=None):
        """Bulk create access grants for a record (resp. its parent)."""
        record, parent = self.get_parent_and_record_or_draft(id_)
        # Permissions
        self.require_permission(identity, "manage", record=record)
        # Validation
        data, __ = self.schema_grants.load(
            data, context={"identity": identity}, raise_errors=True
        )
        grants = data["grants"]
        new_grants = []
        # fail if any of the grants already exist
        if any(
            existing_grant.subject_id == grant["subject"]["id"]
            and existing_grant.subject_type == grant["subject"]["type"]
            for existing_grant in parent.access.grants
            for grant in grants
        ):
            raise GrantExistsError()
        for grant in grants:
            # checks if groups are enabled in the instance
            if (
                not current_app.config.get("USERS_RESOURCES_GROUPS_ENABLED", False)
                and grant["subject"]["type"] == RecordAccessService.group_subject_type
            ):
                raise PermissionDeniedError()
            # Creation
            new_grant = parent.access.grants.create(
                subject_type=grant["subject"]["type"],
                subject_id=grant["subject"]["id"],
                permission=grant["permission"],
                origin=grant.get("origin"),
            )
            if not self._validate_grant_subject(identity, new_grant):
>               raise ValidationError(
                    _("Could not find the specified subject."), field_name="subject.id"
                )
E               marshmallow.exceptions.ValidationError: Could not find the specified subject
invenio_rdm_records/services/access/service.py:430: ValidationError
----------------------------- Captured stderr call -----------------------------
'record-view'
'record-view'
[2026-02-17 12:48:25,163] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:48:25,163] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
[2026-02-17 12:48:25,193] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
------------------------------ Captured log call -------------------------------
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 384, in read
    self.require_permission(identity, action, record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 49, in inner
    response = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 142, in read
    item = self.service.read(
        g.identity,
    ...<3 lines>
        include_deleted=resource_requestctx.args.get("include_deleted", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 673, in read
    result = super().read(identity, id_, expand=expand)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 386, in read
    raise RecordPermissionDeniedError(action_name=action, record=record)
invenio_records_resources.services.errors.RecordPermissionDeniedError
_____________________ test_metadata_only_records_disabled ______________________
client = <FlaskClient <Flask 'invenio'>>
headers = {'accept': 'application/json', 'content-type': 'application/json'}
minimal_record = {'access': {'files': 'public', 'record': 'public'}, 'files': {'enabled': False}, 'metadata': {'creators': [{'person_or...], 'publication_date': '2020-06-01', 'publisher': 'Acme Inc', 'resource_type': {'id': 'image-photo'}, ...}, 'pids': {}}
users = [<User 40>, <User 41>]
superuser = <pytest_invenio.user.UserFixtureBase object at 0x7fc3ec5b3d80>
metadata_only_records_disabled = None
    def test_metadata_only_records_disabled(
        client,
        headers,
        minimal_record,
        users,
        superuser,
        metadata_only_records_disabled,
    ):
        login_user(client, users[0])
        recid = create_draft(client, minimal_record, headers)
        url = f"/records/{recid}/draft"
        minimal_record["files"] = {"enabled": False}
        # Owner can't disable files
        response = client.put(url, json=minimal_record, headers=headers)
        assert response.status_code == 200
        assert response.json["files"]["enabled"] is True
        assert response.json["errors"][0]["field"] == "files.enabled"
        assert response.json["errors"][0]["messages"] == [
            "You don't have permissions to manage files options.",
        ]
        # Admins though can disable files
        logout_user(client)
        login_user(client, superuser.user)
        response = client.put(url, json=minimal_record, headers=headers)
>       assert response.status_code == 200
E       assert 403 == 200
E        +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
tests/resources/test_draft_file_permissions.py:501: AssertionError
----------------------------- Captured stderr call -----------------------------
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
[2026-02-17 12:48:36,837] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
------------------------------ Captured log call -------------------------------
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
____________________ test_files_api_flow_for_deleted_record ____________________
client = <FlaskClient <Flask 'invenio'>>
headers = {'accept': 'application/json', 'content-type': 'application/json'}
running_app = RunningApp(app=<Flask 'invenio'>, superuser_identity=<Identity id="9" auth_type="None" provides={Need(method='system_r...ices.records.results.RecordItem object at 0x7fc3ebee36b0>}, moderator_role=<Role 2d875315-9921-49f8-86be-b6f5ac130e7b>)
minimal_record = {'access': {'files': 'public', 'record': 'public'}, 'files': {'enabled': True}, 'metadata': {'creators': [{'person_or_...], 'publication_date': '2020-06-01', 'publisher': 'Acme Inc', 'resource_type': {'id': 'image-photo'}, ...}, 'pids': {}}
users = [<User 10>, <User 11>], location = pytest-location
superuser = <pytest_invenio.user.UserFixtureBase object at 0x7fc3eb5d8b50>
    def test_files_api_flow_for_deleted_record(
        client, headers, running_app, minimal_record, users, location, superuser
    ):
        login_user(client, users[0])
        draft = create_draft(client, minimal_record, headers)
        recid = draft["id"]
        attach_file(client, recid, "test.pdf", headers)
        # publish the draft
        response = client.post(link(draft["links"]["publish"]), headers=headers)
        assert response.status_code == 202
        assert response.data
        logout_user(client)
        url = f"/records/{recid}/files"
        response = client.get(url, headers=headers)
        assert 200 == response.status_code
        assert response.data
        url = f"/records/{recid}/files/test.pdf"
        response = client.get(url, headers=headers)
        assert 200 == response.status_code
        assert response.data
        url = f"/records/{recid}/files/test.pdf/content"
        response = client.get(url, headers=headers)
        assert 200 == response.status_code
        assert response.data
        url = f"/records/{recid}/files-archive"
        response = client.get(url, headers=headers)
        assert 200 == response.status_code
        assert response.data
        login_user(client, superuser.user)
        # We delete the record
>       delete_record(client, recid, headers)
tests/resources/test_files.py:164: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
client = <FlaskClient <Flask 'invenio'>>, recid = 'enw6y-t6417'
headers = {'accept': 'application/json', 'content-type': 'application/json'}
    def delete_record(client, recid, headers):
        """Soft delete a record."""
        response = client.delete(f"/records/{recid}/delete", json={}, headers=headers)
>       assert response.status_code == 204
E       assert 403 == 204
E        +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
tests/resources/test_files.py:29: AssertionError
---------------------------- Captured stderr setup -----------------------------
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
[2026-02-17 12:48:45,258] ERROR in api: Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
------------------------------ Captured log setup ------------------------------
ERROR    invenio:api.py:376 Failed to index record 8
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
----------------------------- Captured stderr call -----------------------------
'record-view'
'record-view'
[2026-02-17 12:48:45,902] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:48:45,902] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
[2026-02-17 12:48:46,256] WARNING in receivers: Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
[2026-02-17 12:48:46,297] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
------------------------------ Captured log call -------------------------------
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
WARNING  invenio:receivers.py:55 Tried to build event emitter for unregistered event 'file-download'
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
______________ test_filename_with_slash_flow_for_deleted_record_ _______________
client = <FlaskClient <Flask 'invenio'>>
headers = {'accept': 'application/json', 'content-type': 'application/json'}
running_app = RunningApp(app=<Flask 'invenio'>, superuser_identity=<Identity id="13" auth_type="None" provides={Need(method='system_...ices.records.results.RecordItem object at 0x7fc3ebee36b0>}, moderator_role=<Role 2d875315-9921-49f8-86be-b6f5ac130e7b>)
minimal_record = {'access': {'files': 'public', 'record': 'public'}, 'files': {'enabled': True}, 'metadata': {'creators': [{'person_or_...], 'publication_date': '2020-06-01', 'publisher': 'Acme Inc', 'resource_type': {'id': 'image-photo'}, ...}, 'pids': {}}
users = [<User 14>, <User 15>], location = pytest-location
superuser = <pytest_invenio.user.UserFixtureBase object at 0x7fc3eb216150>
    def test_filename_with_slash_flow_for_deleted_record_(
        client, headers, running_app, minimal_record, users, location, superuser
    ):
        login_user(client, users[0])
        draft = create_draft(client, minimal_record, headers)
        recid = draft["id"]
        filename = "folder/test.pdf"
        attach_file(client, recid, filename, headers)
        # publish the draft
        response = client.post(link(draft["links"]["publish"]), headers=headers)
        assert response.status_code == 202
        assert response.data
        logout_user(client)
        url = f"/records/{recid}/files"
        response = client.get(url, headers=headers)
        assert 200 == response.status_code
        assert response.data
        url = f"/records/{recid}/files/{filename}"
        response = client.get(url, headers=headers)
        assert 200 == response.status_code
        assert response.data
        url = f"/records/{recid}/files/{filename}/content"
        response = client.get(url, headers=headers)
        assert 200 == response.status_code
        assert response.data
        url = f"/records/{recid}/files-archive"
        response = client.get(url, headers=headers)
        assert 200 == response.status_code
        assert response.data
        login_user(client, superuser.user)
        # We delete the record
>       delete_record(client, recid, headers)
tests/resources/test_files.py:264: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
client = <FlaskClient <Flask 'invenio'>>, recid = 'q09v3-40715'
headers = {'accept': 'application/json', 'content-type': 'application/json'}
    def delete_record(client, recid, headers):
        """Soft delete a record."""
        response = client.delete(f"/records/{recid}/delete", json={}, headers=headers)
>       assert response.status_code == 204
E       assert 403 == 204
E        +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
tests/resources/test_files.py:29: AssertionError
---------------------------- Captured stderr setup -----------------------------
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
[2026-02-17 12:48:46,383] ERROR in api: Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
------------------------------ Captured log setup ------------------------------
ERROR    invenio:api.py:376 Failed to index record 12
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
----------------------------- Captured stderr call -----------------------------
'record-view'
'record-view'
[2026-02-17 12:48:47,025] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:48:47,026] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
[2026-02-17 12:48:47,415] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
------------------------------ Captured log call -------------------------------
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
___________________ test_list_media_files_for_deleted_record ___________________
client = <FlaskClient <Flask 'invenio'>>
headers = {'accept': 'application/json', 'content-type': 'application/json'}
running_app = RunningApp(app=<Flask 'invenio'>, superuser_identity=<Identity id="17" auth_type="None" provides={Need(method='system_...ices.records.results.RecordItem object at 0x7fc3e34849b0>}, moderator_role=<Role 652c2a98-0122-42f5-b58c-08e5f997bc66>)
minimal_record = {'access': {'files': 'public', 'record': 'public'}, 'files': {'enabled': False}, 'media_files': {'enabled': True}, 'me...onal'}}], 'publication_date': '2020-06-01', 'publisher': 'Acme Inc', 'resource_type': {'id': 'image-photo'}, ...}, ...}
users = [<User 18>, <User 19>], location = pytest-location
superuser = <pytest_invenio.user.UserFixtureBase object at 0x7fc3e2fb3800>
    def test_list_media_files_for_deleted_record(
        client, headers, running_app, minimal_record, users, location, superuser
    ):
        login_user(client, users[0])
        recid = create_draft(client, minimal_record, headers)
        init_file(client, recid, headers)
        upload_file(client, recid)
        # upload file and commit
        response = commit_file(client, recid, headers)
        assert response.status_code == 200
        assert response.data
        publish_draft(client, recid, headers)
        logout_user(client)
        url = f"/records/{recid}/media-files"
        response = client.get(url, headers=headers)
        assert 200 == response.status_code
        assert response.data
        url = f"/records/{recid}/media-files/test.pdf"
        response = client.get(url, headers=headers)
        assert 200 == response.status_code
        assert response.data
        url = f"/records/{recid}/media-files/test.pdf/content"
        response = client.get(url, headers=headers)
        assert 200 == response.status_code
        assert response.data
        url = f"/records/{recid}/media-files-archive"
        response = client.get(url, headers=headers)
        assert 200 == response.status_code
        assert response.data
        login_user(client, superuser.user)
        # We delete the record
>       delete_record(client, recid, headers)
tests/resources/test_media_files.py:223: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
client = <FlaskClient <Flask 'invenio'>>, recid = '2mats-dy057'
headers = {'accept': 'application/json', 'content-type': 'application/json'}
    def delete_record(client, recid, headers):
        """Soft delete a record."""
        response = client.delete(f"/records/{recid}/delete", json={}, headers=headers)
>       assert response.status_code == 204
E       assert 403 == 204
E        +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
tests/resources/test_media_files.py:40: AssertionError
---------------------------- Captured stderr setup -----------------------------
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
[2026-02-17 12:49:30,103] ERROR in api: Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
------------------------------ Captured log setup ------------------------------
ERROR    invenio:api.py:376 Failed to index record 16
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
----------------------------- Captured stderr call -----------------------------
'record-view'
'record-view'
[2026-02-17 12:49:30,784] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:49:30,784] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
[2026-02-17 12:49:31,157] WARNING in receivers: Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
Tried to build event emitter for unregistered event 'file-download'
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
[2026-02-17 12:49:31,198] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
------------------------------ Captured log call -------------------------------
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
WARNING  invenio:receivers.py:55 Tried to build event emitter for unregistered event 'file-download'
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/resources/resources.py", line 209, in delete_record
    item = self.service.delete_record(
        g.identity,
    ...<2 lines>
        revision_id=resource_requestctx.headers.get("if_match"),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 201, in delete_record
    self.require_permission(identity, "delete", record=record)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
______________________________ test_request_flow _______________________________
uploader = <pytest_invenio.user.UserFixtureBase object at 0x7fc3eb3299c0>
superuser = <pytest_invenio.user.UserFixtureBase object at 0x7fc3eb215c80>
client = <FlaskClient <Flask 'invenio'>>
record_factory = <tests.conftest.record_factory.<locals>.RecordFactory object at 0x7fc3e5d10ec0>
headers = {'accept': 'application/json', 'content-type': 'application/json'}
    def test_request_flow(uploader, superuser, client, record_factory, headers):
        """Test request deletion flow."""
        record = record_factory.create_record()
        # Set the record creation date beyond the 30-day immediate deletion grace period
        record.model.created -= timedelta(days=31)
        db.session.commit()
        uploader.login(client)
        resp = client.post(
            f"/records/{record.pid.pid_value}/request-deletion",
            json={"reason": "test-record", "comment": "Test request deletion comment"},
            headers=headers,
        )
        assert resp.status_code == 201
        assert resp.json["status"] == "submitted"
        # No flashed messages, since there was no immediate deletion
        assert "_flashes" not in session
        request_id = resp.json["id"]
        # Accept the request as superuser
        superuser.login(client, logout_first=True)
        resp = client.post(f"/requests/{request_id}/actions/accept", headers=headers)
>       assert resp.status_code == 200
E       assert 403 == 200
E        +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
tests/resources/test_request_deletion.py:75: AssertionError
----------------------------- Captured stderr call -----------------------------
'record-view'
'record-view'
[2026-02-17 12:50:00,151] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:50:00,151] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-view'
'record-view'
[2026-02-17 12:50:00,408] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:50:00,409] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
[2026-02-17 12:50:00,691] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
------------------------------ Captured log call -------------------------------
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/resources/requests/resource.py", line 139, in execute_action
    item = self.service.execute_action(
        identity=g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_requests/services/requests/service.py", line 244, in execute_action
    self.require_permission(identity, permission_name, request=request)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: action_accept
_____________________________ test_already_deleted _____________________________
uploader = <pytest_invenio.user.UserFixtureBase object at 0x7fc3ebd0eaf0>
superuser = <pytest_invenio.user.UserFixtureBase object at 0x7fc3ebd0d0d0>
client = <FlaskClient <Flask 'invenio'>>
record_factory = <tests.conftest.record_factory.<locals>.RecordFactory object at 0x7fc3e67e6a50>
headers = {'accept': 'application/json', 'content-type': 'application/json'}
    def test_already_deleted(uploader, superuser, client, record_factory, headers):
        """Test endpoint returns appropriate error for already deleted record."""
        record = record_factory.create_record()
        # Delete the record first using service (administrative deletion by superuser)
>       service.delete_record(superuser.identity, record.pid.pid_value, {})
tests/resources/test_request_deletion.py:130: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/invenio_db/uow.py:251: in inner
    res = f(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^
invenio_rdm_records/services/services.py:201: in delete_record
    self.require_permission(identity, "delete", record=record)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <invenio_rdm_records.services.services.RDMRecordService object at 0x7fc3e32eaed0>
identity = <Identity id="14" auth_type="None" provides={Need(method='system_role', value='any_user'), Need(method='role', value='superuser-access'), Need(method='id', value=14), Need(method='system_role', value='authenticated_user')}>
action_name = 'delete'
kwargs = {'record': {'id': '1g8jm-2yy34', 'pid': {'pk': 40, 'status': 'R', 'obj_type': 'rec', 'pid_type': 'recid'}, 'pids': {'d...to'}, 'publication_date': '2020-06-01'}, 'media_files': {'enabled': False}, 'custom_fields': {}, 'internal_notes': []}}
    def require_permission(self, identity, action_name, **kwargs):
        """Require a specific permission from the permission policy
        Like `check_permission` but raises an error if not allowed
        """
        if not self.check_permission(identity, action_name, **kwargs):
>           raise PermissionDeniedError(action_name)
E           invenio_records_resources.services.errors.PermissionDeniedError: delete
venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py:51: PermissionDeniedError
----------------------------- Captured stderr call -----------------------------
'record-view'
'record-view'
[2026-02-17 12:50:02,419] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:50:02,420] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-view'
'record-view'
[2026-02-17 12:50:02,663] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:50:02,663] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
------------------------------ Captured log call -------------------------------
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
_______________________ test_restricted_records_disabled _______________________
running_app = RunningApp(app=<Flask 'invenio'>, superuser_identity=<Identity id="37" auth_type="None" provides={Need(method='system_...ices.records.results.RecordItem object at 0x7fc3ee0da490>}, moderator_role=<Role 6b8b7d66-1f9b-495a-89e3-bb127d3090d0>)
client_with_login = <FlaskClient <Flask 'invenio'>>
headers = {'accept': 'application/json', 'content-type': 'application/json'}
minimal_record = {'access': {'files': 'public', 'record': 'restricted'}, 'files': {'enabled': False}, 'metadata': {'creators': [{'perso...], 'publication_date': '2020-06-01', 'publisher': 'Acme Inc', 'resource_type': {'id': 'image-photo'}, ...}, 'pids': {}}
search_clear = <OpenSearch([{'host': 'localhost', 'port': 9200}])>
superuser = <pytest_invenio.user.UserFixtureBase object at 0x7fc3eb2168e0>
restricted_records_disabled = None
    def test_restricted_records_disabled(
        running_app,
        client_with_login,
        headers,
        minimal_record,
        search_clear,
        superuser,
        restricted_records_disabled,
    ):
        client = client_with_login
        response = client.post("/records", json=minimal_record, headers=headers)
        recid = response.json["id"]
        assert response.status_code == 201
        assert response.json["access"]["record"] == "public"
        # Trying to change record access to restricted will fail
        minimal_record["access"]["record"] = "restricted"
        response = client.put(
            f"/records/{recid}/draft",
            json=minimal_record,
            headers=headers,
        )
        assert response.status_code == 400
        assert response.json["errors"][0]["field"] == "access"
        assert response.json["errors"][0]["messages"] == [
            "You don't have permissions to manage record access.",
        ]
        # Record access should still be "public"
        response = client.get(f"/records/{recid}/draft", headers=headers)
        assert response.json["access"]["record"] == "public"
        # Superuser can change record access
        superuser.login(client, logout_first=True)
        minimal_record["access"]["record"] = "restricted"
        response = client.put(
            f"/records/{recid}/draft",
            json=minimal_record,
            headers=headers,
        )
>       assert response.status_code == 200
E       assert 403 == 200
E        +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
tests/resources/test_resources.py:512: AssertionError
----------------------------- Captured stderr call -----------------------------
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
[2026-02-17 12:50:19,509] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
[2026-02-17 12:50:19,662] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
------------------------------ Captured log call -------------------------------
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 305, in update_draft
    self.run_components(
    ~~~~~~~~~~~~~~~~~~~^
        "update_draft", identity, record=draft, data=data, errors=errors, uow=uow
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 72, in run_components
    getattr(component, action)(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 65, in update_draft
    self._populate_access_and_validate(identity, data, record, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/components/access.py", line 51, in _populate_access_and_validate
    raise ValidationError(messages, field_name="access")
marshmallow.exceptions.ValidationError: ["You don't have permissions to manage record access."]
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/resources/records/resource.py", line 228, in update_draft
    item = self.service.update_draft(
        g.identity,
    ...<3 lines>
        expand=resource_requestctx.args.get("expand", False),
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/services/services.py", line 739, in update_draft
    return super().update_draft(
           ~~~~~~~~~~~~~~~~~~~~^
        identity,
        ^^^^^^^^^
    ...<4 lines>
        expand=expand,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 255, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py", line 289, in update_draft
    self.require_permission(identity, "update_draft", record=draft)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: update_draft
______________________ test_search_internal_notes_fields _______________________
running_app = RunningApp(app=<Flask 'invenio'>, superuser_identity=<Identity id="66" auth_type="None" provides={Need(method='role', ...ices.records.results.RecordItem object at 0x7fc3ee0da490>}, moderator_role=<Role 6b8b7d66-1f9b-495a-89e3-bb127d3090d0>)
client = <FlaskClient <Flask 'invenio'>>
minimal_record = {'access': {'files': 'public', 'record': 'public'}, 'files': {'enabled': False}, 'metadata': {'creators': [{'person_or...], 'publication_date': '2020-06-01', 'publisher': 'Acme Inc', 'resource_type': {'id': 'image-photo'}, ...}, 'pids': {}}
headers = {'accept': 'application/json', 'content-type': 'application/json'}
search_clear = <OpenSearch([{'host': 'localhost', 'port': 9200}])>
superuser = <pytest_invenio.user.UserFixtureBase object at 0x7fc3ed0bdb20>
users = [<User 68>, <User 69>]
    def test_search_internal_notes_fields(
        running_app, client, minimal_record, headers, search_clear, superuser, users
    ):
        # login regular user
        login_user(client, users[0])
        minimal_record_w_int_notes = deepcopy(minimal_record)
        minimal_record_w_int_notes["internal_notes"] = [{"note": "abc"}]
        with pytest.raises(FieldPermissionError):
            resp = client.post(
                "/records", json={**minimal_record_w_int_notes}, headers=headers
            )
        # login admin
        logout_user(client)
        user = superuser.user
        login_user(client, user)
>       resp = client.post("/records", json={**minimal_record_w_int_notes}, headers=headers)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/resources/test_resources.py:972: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/werkzeug/test.py:1167: in post
    return self.open(*args, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/flask/testing.py:235: in open
    response = super().open(
venv/lib/python3.14/site-packages/werkzeug/test.py:1116: in open
    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/werkzeug/test.py:988: in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/werkzeug/test.py:1264: in run_wsgi_app
    app_rv = app(environ, start_response)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/flask/app.py:1536: in __call__
    return self.wsgi_app(environ, start_response)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/flask/app.py:1514: in wsgi_app
    response = self.handle_exception(e)
               ^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/flask/app.py:1511: in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/flask/app.py:919: in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/flask/app.py:917: in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/flask/app.py:902: in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/flask_resources/resources.py:65: in view
    return view_meth()
           ^^^^^^^^^^^
venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py:116: in inner_content_negotiation
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py:51: in inner
    return f(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py:90: in inner
    return f(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/flask_resources/responses.py:39: in inner
    res = f(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/invenio_records_resources/resources/records/resource.py:93: in create
    item = self.service.create(
venv/lib/python3.14/site-packages/invenio_db/uow.py:251: in inner
    res = f(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py:330: in create
    res = self._create(
venv/lib/python3.14/site-packages/invenio_db/uow.py:255: in inner
    return f(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py:344: in _create
    data, errors = self.schema.load(
venv/lib/python3.14/site-packages/invenio_records_resources/services/records/schema.py:97: in load
    valid_data = self.schema(**schema_args).load(data)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/marshmallow/schema.py:792: in load
    return self._do_load(
venv/lib/python3.14/site-packages/marshmallow/schema.py:941: in _do_load
    processed_data = self._invoke_load_processors(
venv/lib/python3.14/site-packages/marshmallow/schema.py:1180: in _invoke_load_processors
    return self._invoke_processors(
venv/lib/python3.14/site-packages/marshmallow/schema.py:1305: in _invoke_processors
    data = processor(data, many=many, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <RDMRecordSchema(many=False)>
data = {'access': {'files': 'public', 'record': 'public'}, 'files': {'enabled': False}, 'internal_notes': [{'note': 'abc'}], ...onal'}}], 'publication_date': '2020-06-01', 'publisher': 'Acme Inc', 'resource_type': {'id': 'image-photo'}, ...}, ...}
kwargs = {'many': False, 'partial': None}
field_permission_check = <function ServiceSchemaWrapper._build_context.<locals>._permission_check at 0x7fc3ed0bf3d0>
k = 'internal_notes', action = 'manage_internal'
    @pre_load
    def _permissions_filter_load(self, data, **kwargs):
        if "field_permission_check" in self.context:
            warn(
                "using self.context for field_permission_check is deprecated, use marshmallow_utils.context:context_schema for it.",
            )
            field_permission_check = self.context.get("field_permission_check")
        else:
            try:
                field_permission_check = context_schema.get()["field_permission_check"]
            except LookupError:
                field_permission_check = False
        if field_permission_check:
            for k in self.field_load_permissions:
                if k in data:
                    action = self.field_load_permissions[k] or self.default_load_action
                    # TODO (Alex): Maybe cache?
                    if action and not field_permission_check(action):
>                       raise FieldPermissionError(k)
E                       marshmallow_utils.permissions.FieldPermissionError: internal_notes
venv/lib/python3.14/site-packages/marshmallow_utils/permissions.py:50: FieldPermissionError
_______________________ test_restricted_record_creation ________________________
self = <invenio_rdm_records.services.services.RDMRecordService object at 0x7fc3e67df550>
identity = <Identity id="80" auth_type="None" provides={Need(method='system_role', value='any_user'), Need(method='role', value='superuser-access'), Need(method='system_role', value='authenticated_user'), Need(method='id', value=80)}>
id_ = '8zeh8-m1763', uow = <invenio_db.uow.UnitOfWork object at 0x7fc3e19d50d0>
expand = False
    @unit_of_work()
    def publish(self, identity, id_, uow=None, expand=False):
        """Publish a draft
        Check for permissions to publish a draft and then call invenio_drafts_resourcs.services.records.services.publish()
        """
        try:
            draft = self.draft_cls.pid.resolve(id_, registered_only=False)
>           self.require_permission(identity, "publish", record=draft)
invenio_rdm_records/services/services.py:518: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <invenio_rdm_records.services.services.RDMRecordService object at 0x7fc3e67df550>
identity = <Identity id="80" auth_type="None" provides={Need(method='system_role', value='any_user'), Need(method='role', value='superuser-access'), Need(method='system_role', value='authenticated_user'), Need(method='id', value=80)}>
action_name = 'publish'
kwargs = {'record': {'id': '8zeh8-m1763', 'pid': {'pk': 180, 'status': 'N', 'obj_type': 'rec', 'pid_type': 'recid'}, 'pids': {}...to'}, 'publication_date': '2020-06-01'}, 'media_files': {'enabled': False}, 'custom_fields': {}, 'internal_notes': []}}
    def require_permission(self, identity, action_name, **kwargs):
        """Require a specific permission from the permission policy
        Like `check_permission` but raises an error if not allowed
        """
        if not self.check_permission(identity, action_name, **kwargs):
>           raise PermissionDeniedError(action_name)
E           invenio_records_resources.services.errors.PermissionDeniedError: publish
venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py:51: PermissionDeniedError
During handling of the above exception, another exception occurred:
app = <Flask 'invenio'>
record_community = <tests.conftest.record_community.<locals>.Record object at 0x7fc3e19316a0>
uploader = <pytest_invenio.user.UserFixtureBase object at 0x7fc3e1bc0730>
curator = <pytest_invenio.user.UserFixtureBase object at 0x7fc3e19709f0>
community_owner = <pytest_invenio.user.UserFixtureBase object at 0x7fc3e1951a70>
test_user = <pytest_invenio.user.UserFixtureBase object at 0x7fc3e1973a10>
superuser = <pytest_invenio.user.UserFixtureBase object at 0x7fc3e19c1860>
monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7fc3e57971c0>
    def test_restricted_record_creation(
        app,
        record_community,
        uploader,
        curator,
        community_owner,
        test_user,
        superuser,
        monkeypatch,
    ):
        """Verify CommunityRequiredError is raised when direct publish a record"""
        # You can directly publish a record when the config is disabled
        monkeypatch.setitem(app.config, "RDM_COMMUNITY_REQUIRED_TO_PUBLISH", False)
        rec = record_community.create_record(community=None)
        assert rec.id
        monkeypatch.setitem(app.config, "RDM_COMMUNITY_REQUIRED_TO_PUBLISH", True)
        # You can't directly publish
        users = [
            curator,
            test_user,
            uploader,
            community_owner,
        ]
        for user in users:
            with pytest.raises(CommunityRequiredError):
                record_community.create_record(uploader=user, community=None)
        # Super user can!
>       super_user_rec = record_community.create_record(uploader=superuser, community=None)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/resources/test_resources_communities.py:930: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
tests/conftest.py:2165: in create_record
    result_item = current_rdm_records_service.publish(
venv/lib/python3.14/site-packages/invenio_db/uow.py:251: in inner
    res = f(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <invenio_rdm_records.services.services.RDMRecordService object at 0x7fc3e67df550>
identity = <Identity id="80" auth_type="None" provides={Need(method='system_role', value='any_user'), Need(method='role', value='superuser-access'), Need(method='system_role', value='authenticated_user'), Need(method='id', value=80)}>
id_ = '8zeh8-m1763', uow = <invenio_db.uow.UnitOfWork object at 0x7fc3e19d50d0>
expand = False
    @unit_of_work()
    def publish(self, identity, id_, uow=None, expand=False):
        """Publish a draft
        Check for permissions to publish a draft and then call invenio_drafts_resourcs.services.records.services.publish()
        """
        try:
            draft = self.draft_cls.pid.resolve(id_, registered_only=False)
            self.require_permission(identity, "publish", record=draft)
            # By default, admin/superuser has permission to do everything, so PermissionDeniedError won't be raised for admin in any case
        except PermissionDeniedError as exc:
            # If user doesn't have permission to publish, determine which error to raise, based on config
            community_required = current_app.config["RDM_COMMUNITY_REQUIRED_TO_PUBLISH"]
            is_community_missing = len(draft.parent.communities.ids) < 1
            if community_required and is_community_missing:
>               raise CommunityRequiredError()
E               invenio_rdm_records.services.errors.CommunityRequiredError
invenio_rdm_records/services/services.py:525: CommunityRequiredError
----------------------------- Captured stderr call -----------------------------
'record-view'
'record-view'
[2026-02-17 12:51:10,940] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:51:10,940] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-view'
'record-view'
[2026-02-17 12:51:11,195] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:51:11,195] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
------------------------------ Captured log call -------------------------------
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
_______________________________ test_create_set ________________________________
client = <FlaskClient <Flask 'invenio'>>
admin = <pytest_invenio.user.UserFixtureBase object at 0x7fc3df6bae60>
minimal_oai_set = {'description': None, 'name': 'name', 'search_pattern': 'is_published:true', 'spec': 'spec'}
headers = {'accept': 'application/json', 'content-type': 'application/json'}
    def test_create_set(client, admin, minimal_oai_set, headers):
        """Create a set."""
        client = admin.login(client)
        # without description
>       s1 = _create_set(client, minimal_oai_set, headers, 201).json
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/resources/test_resources_oai.py:81: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
client = <FlaskClient <Flask 'invenio'>>
data = {'description': None, 'name': 'name', 'search_pattern': 'is_published:true', 'spec': 'spec'}
headers = {'accept': 'application/json', 'content-type': 'application/json'}
status_code = 201
    def _create_set(client, data, headers, status_code):
        """Send POST request."""
        s = client.post(
            "/oaipmh/sets",
            headers=headers,
            json=data,
        )
>       assert s.status_code == status_code
E       assert 403 == 201
E        +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
tests/resources/test_resources_oai.py:22: AssertionError
---------------------------- Captured stderr setup -----------------------------
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
[2026-02-17 12:51:30,264] DEBUG in ext: Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
------------------------------ Captured log setup ------------------------------
DEBUG    invenio:ext.py:99 Flask-DebugToolbar extension not installed
----------------------------- Captured stderr call -----------------------------
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
[2026-02-17 12:51:32,852] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
------------------------------ Captured log call -------------------------------
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
__________________________ test_create_set_duplicate ___________________________
client = <FlaskClient <Flask 'invenio'>>
admin = <pytest_invenio.user.UserFixtureBase object at 0x7fc3df577c20>
minimal_oai_set = {'description': None, 'name': 'name', 'search_pattern': 'is_published:true', 'spec': 'spec'}
headers = {'accept': 'application/json', 'content-type': 'application/json'}
    def test_create_set_duplicate(client, admin, minimal_oai_set, headers):
        """Create two sets with same spec."""
        client = admin.login(client)
>       _create_set(client, minimal_oai_set, headers, 201)
tests/resources/test_resources_oai.py:108: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
client = <FlaskClient <Flask 'invenio'>>
data = {'description': None, 'name': 'name', 'search_pattern': 'is_published:true', 'spec': 'spec'}
headers = {'accept': 'application/json', 'content-type': 'application/json'}
status_code = 201
    def _create_set(client, data, headers, status_code):
        """Send POST request."""
        s = client.post(
            "/oaipmh/sets",
            headers=headers,
            json=data,
        )
>       assert s.status_code == status_code
E       assert 403 == 201
E        +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
tests/resources/test_resources_oai.py:22: AssertionError
----------------------------- Captured stderr call -----------------------------
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
[2026-02-17 12:51:32,984] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
------------------------------ Captured log call -------------------------------
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
_________________________ test_create_set_invalid_data _________________________
client = <FlaskClient <Flask 'invenio'>>
admin = <pytest_invenio.user.UserFixtureBase object at 0x7fc3df5e6e60>
minimal_oai_set = {'description': None, 'name': 'name', 'search_pattern': 'is_published:true', 'spec': 'spec'}
headers = {'accept': 'application/json', 'content-type': 'application/json'}
    def test_create_set_invalid_data(client, admin, minimal_oai_set, headers):
        """Try to create a set with invalid params."""
        client = admin.login(client)
        key = "name"
        s = minimal_oai_set.copy()
        s[key] *= 256
>       _create_set(client, s, headers, 400)
tests/resources/test_resources_oai.py:119: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
client = <FlaskClient <Flask 'invenio'>>
data = {'description': None, 'name': 'namenamenamenamenamenamenamenamenamenamenamenamenamenamenamenamenamenamenamenamenamenam...menamenamenamenamenamenamenamenamenamenamenamenamenamenamename', 'search_pattern': 'is_published:true', 'spec': 'spec'}
headers = {'accept': 'application/json', 'content-type': 'application/json'}
status_code = 400
    def _create_set(client, data, headers, status_code):
        """Send POST request."""
        s = client.post(
            "/oaipmh/sets",
            headers=headers,
            json=data,
        )
>       assert s.status_code == status_code
E       assert 403 == 400
E        +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
tests/resources/test_resources_oai.py:22: AssertionError
----------------------------- Captured stderr call -----------------------------
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
[2026-02-17 12:51:33,114] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
------------------------------ Captured log call -------------------------------
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
_________________________________ test_get_set _________________________________
client = <FlaskClient <Flask 'invenio'>>
admin = <pytest_invenio.user.UserFixtureBase object at 0x7fc3df431ff0>
minimal_oai_set = {'description': None, 'name': 'name', 'search_pattern': 'is_published:true', 'spec': 'spec'}
headers = {'accept': 'application/json', 'content-type': 'application/json'}
    def test_get_set(client, admin, minimal_oai_set, headers):
        """Retrieve a set."""
        client = admin.login(client)
        # without description
>       created_set = _create_set(client, minimal_oai_set, headers, 201).json
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/resources/test_resources_oai.py:147: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
client = <FlaskClient <Flask 'invenio'>>
data = {'description': None, 'name': 'name', 'search_pattern': 'is_published:true', 'spec': 'spec'}
headers = {'accept': 'application/json', 'content-type': 'application/json'}
status_code = 201
    def _create_set(client, data, headers, status_code):
        """Send POST request."""
        s = client.post(
            "/oaipmh/sets",
            headers=headers,
            json=data,
        )
>       assert s.status_code == status_code
E       assert 403 == 201
E        +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
tests/resources/test_resources_oai.py:22: AssertionError
----------------------------- Captured stderr call -----------------------------
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
[2026-02-17 12:51:33,244] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
------------------------------ Captured log call -------------------------------
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
__________________________ test_get_set_not_existing ___________________________
client = <FlaskClient <Flask 'invenio'>>
admin = <pytest_invenio.user.UserFixtureBase object at 0x7fc3df44d180>
headers = {'accept': 'application/json', 'content-type': 'application/json'}
    def test_get_set_not_existing(client, admin, headers):
        """Retrieve not existing set."""
        client = admin.login(client)
>       _get_set(client, 9001, headers, 404).json
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/resources/test_resources_oai.py:169: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
client = <FlaskClient <Flask 'invenio'>>, id = 9001
headers = {'accept': 'application/json', 'content-type': 'application/json'}
status_code = 404
    def _get_set(client, id, headers, status_code):
        """Send GET request."""
        s = client.get(
            f"/oaipmh/sets/{id}",
            headers=headers,
        )
>       assert s.status_code == status_code
E       assert 403 == 404
E        +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
tests/resources/test_resources_oai.py:32: AssertionError
----------------------------- Captured stderr call -----------------------------
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
[2026-02-17 12:51:33,374] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
------------------------------ Captured log call -------------------------------
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 76, in read
    item = self.service.read(
        g.identity,
        resource_requestctx.view_args["id"],
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 147, in read
    self.require_permission(identity, "read")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read
_______________________________ test_update_set ________________________________
client = <FlaskClient <Flask 'invenio'>>
admin = <pytest_invenio.user.UserFixtureBase object at 0x7fc3df4b4470>
minimal_oai_set = {'description': None, 'name': 'name', 'search_pattern': 'is_published:true', 'spec': 'spec'}
headers = {'accept': 'application/json', 'content-type': 'application/json'}
    def test_update_set(client, admin, minimal_oai_set, headers):
        """Update a set."""
        client = admin.login(client)
>       s1 = _create_set(client, minimal_oai_set, headers, 201).json
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/resources/test_resources_oai.py:176: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
client = <FlaskClient <Flask 'invenio'>>
data = {'description': None, 'name': 'name', 'search_pattern': 'is_published:true', 'spec': 'spec'}
headers = {'accept': 'application/json', 'content-type': 'application/json'}
status_code = 201
    def _create_set(client, data, headers, status_code):
        """Send POST request."""
        s = client.post(
            "/oaipmh/sets",
            headers=headers,
            json=data,
        )
>       assert s.status_code == status_code
E       assert 403 == 201
E        +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
tests/resources/test_resources_oai.py:22: AssertionError
----------------------------- Captured stderr call -----------------------------
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
[2026-02-17 12:51:33,503] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
------------------------------ Captured log call -------------------------------
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
_________________________ test_update_set_invalid_data _________________________
client = <FlaskClient <Flask 'invenio'>>
admin = <pytest_invenio.user.UserFixtureBase object at 0x7fc3df4b76a0>
minimal_oai_set = {'description': None, 'name': 'name', 'search_pattern': 'is_published:true', 'spec': 'spec'}
headers = {'accept': 'application/json', 'content-type': 'application/json'}
    def test_update_set_invalid_data(client, admin, minimal_oai_set, headers):
        """Update a set with invalid data
        Most cases are already handled in test_create_set_invalid_data
        """
        client = admin.login(client)
>       s1 = _create_set(client, minimal_oai_set, headers, 201).json
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/resources/test_resources_oai.py:198: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
client = <FlaskClient <Flask 'invenio'>>
data = {'description': None, 'name': 'name', 'search_pattern': 'is_published:true', 'spec': 'spec'}
headers = {'accept': 'application/json', 'content-type': 'application/json'}
status_code = 201
    def _create_set(client, data, headers, status_code):
        """Send POST request."""
        s = client.post(
            "/oaipmh/sets",
            headers=headers,
            json=data,
        )
>       assert s.status_code == status_code
E       assert 403 == 201
E        +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
tests/resources/test_resources_oai.py:22: AssertionError
----------------------------- Captured stderr call -----------------------------
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
[2026-02-17 12:51:33,633] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
------------------------------ Captured log call -------------------------------
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
_______________________________ test_delete_set ________________________________
client = <FlaskClient <Flask 'invenio'>>
admin = <pytest_invenio.user.UserFixtureBase object at 0x7fc3df4ee8e0>
minimal_oai_set = {'description': None, 'name': 'name', 'search_pattern': 'is_published:true', 'spec': 'spec'}
headers = {'accept': 'application/json', 'content-type': 'application/json'}
    def test_delete_set(client, admin, minimal_oai_set, headers):
        """Retrieve a set."""
        client = admin.login(client)
>       s1 = _create_set(client, minimal_oai_set, headers, 201).json
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/resources/test_resources_oai.py:210: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
client = <FlaskClient <Flask 'invenio'>>
data = {'description': None, 'name': 'name', 'search_pattern': 'is_published:true', 'spec': 'spec'}
headers = {'accept': 'application/json', 'content-type': 'application/json'}
status_code = 201
    def _create_set(client, data, headers, status_code):
        """Send POST request."""
        s = client.post(
            "/oaipmh/sets",
            headers=headers,
            json=data,
        )
>       assert s.status_code == status_code
E       assert 403 == 201
E        +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
tests/resources/test_resources_oai.py:22: AssertionError
----------------------------- Captured stderr call -----------------------------
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
[2026-02-17 12:51:33,761] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
------------------------------ Captured log call -------------------------------
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
_________________________ test_delete_set_not_existing _________________________
client = <FlaskClient <Flask 'invenio'>>
admin = <pytest_invenio.user.UserFixtureBase object at 0x7fc3df331a70>
headers = {'accept': 'application/json', 'content-type': 'application/json'}
    def test_delete_set_not_existing(client, admin, headers):
        """Delete not existing set."""
        client = admin.login(client)
>       _delete_set(client, 9001, headers, 404).json
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/resources/test_resources_oai.py:218: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
client = <FlaskClient <Flask 'invenio'>>, id = 9001
headers = {'accept': 'application/json', 'content-type': 'application/json'}
status_code = 404
    def _delete_set(client, id, headers, status_code):
        """Send DELETE request."""
        s = client.delete(
            f"/oaipmh/sets/{id}",
            headers=headers,
        )
>       assert s.status_code == status_code
E       assert 403 == 404
E        +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
tests/resources/test_resources_oai.py:53: AssertionError
----------------------------- Captured stderr call -----------------------------
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
[2026-02-17 12:51:33,891] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
------------------------------ Captured log call -------------------------------
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 99, in delete
    self.service.delete(
    ~~~~~~~~~~~~~~~~~~~^
        g.identity,
        ^^^^^^^^^^^
        resource_requestctx.view_args["id"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 222, in delete
    self.require_permission(identity, "delete")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: delete
_______________________________ test_search_sets _______________________________
client = <FlaskClient <Flask 'invenio'>>
admin = <pytest_invenio.user.UserFixtureBase object at 0x7fc3df3d0c00>
minimal_oai_set = {'description': None, 'name': 'set_0', 'search_pattern': 'is_published:true', 'spec': 'set_0'}
headers = {'accept': 'application/json', 'content-type': 'application/json'}
    def test_search_sets(client, admin, minimal_oai_set, headers):
        """Search sets."""
        client = admin.login(client)
        created_sets = []
        num_sets = 4
        for i in range(num_sets):
            minimal_oai_set["spec"] = minimal_oai_set["name"] = f"set_{i}"
>           s1 = _create_set(client, minimal_oai_set, headers, 201).json
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/resources/test_resources_oai.py:230: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
client = <FlaskClient <Flask 'invenio'>>
data = {'description': None, 'name': 'set_0', 'search_pattern': 'is_published:true', 'spec': 'set_0'}
headers = {'accept': 'application/json', 'content-type': 'application/json'}
status_code = 201
    def _create_set(client, data, headers, status_code):
        """Send POST request."""
        s = client.post(
            "/oaipmh/sets",
            headers=headers,
            json=data,
        )
>       assert s.status_code == status_code
E       assert 403 == 201
E        +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
tests/resources/test_resources_oai.py:22: AssertionError
----------------------------- Captured stderr call -----------------------------
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
[2026-02-17 12:51:34,019] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
------------------------------ Captured log call -------------------------------
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
_________________________ test_search_metadata_formats _________________________
client = <FlaskClient <Flask 'invenio'>>
admin = <pytest_invenio.user.UserFixtureBase object at 0x7fc3df3d3ee0>
headers = {'accept': 'application/json', 'content-type': 'application/json'}
    def test_search_metadata_formats(client, admin, headers):
        """Retrieve metadata formats."""
        client = admin.login(client)
        available_formats = current_app.config.get("OAISERVER_METADATA_FORMATS", {})
>       search = _search_formats(client, headers, 200).json
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/resources/test_resources_oai.py:256: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
client = <FlaskClient <Flask 'invenio'>>
headers = {'accept': 'application/json', 'content-type': 'application/json'}
status_code = 200
    def _search_formats(client, headers, status_code):
        s = client.get(
            "/oaipmh/formats",
            headers=headers,
        )
>       assert s.status_code == status_code
E       assert 403 == 200
E        +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
tests/resources/test_resources_oai.py:72: AssertionError
----------------------------- Captured stderr call -----------------------------
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
[2026-02-17 12:51:34,157] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
------------------------------ Captured log call -------------------------------
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 110, in read_formats
    hits = self.service.read_all_formats(
        identity=identity,
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 232, in read_all_formats
    self.require_permission(identity, "read_format")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: read_format
__________________________________ test_links __________________________________
client = <FlaskClient <Flask 'invenio'>>
admin = <pytest_invenio.user.UserFixtureBase object at 0x7fc3df3a6e60>
minimal_oai_set = {'description': None, 'name': 'name', 'search_pattern': 'is_published:true', 'spec': 'spec'}
headers = {'accept': 'application/json', 'content-type': 'application/json'}
    def test_links(client, admin, minimal_oai_set, headers):
        client = admin.login(client)
        # Item links
>       resp = _create_set(client, minimal_oai_set, headers, 201).json
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/resources/test_resources_oai.py:268: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
client = <FlaskClient <Flask 'invenio'>>
data = {'description': None, 'name': 'name', 'search_pattern': 'is_published:true', 'spec': 'spec'}
headers = {'accept': 'application/json', 'content-type': 'application/json'}
status_code = 201
    def _create_set(client, data, headers, status_code):
        """Send POST request."""
        s = client.post(
            "/oaipmh/sets",
            headers=headers,
            json=data,
        )
>       assert s.status_code == status_code
E       assert 403 == 201
E        +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
tests/resources/test_resources_oai.py:22: AssertionError
----------------------------- Captured stderr call -----------------------------
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
[2026-02-17 12:51:34,285] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
------------------------------ Captured log call -------------------------------
DEBUG    invenio:errors.py:38 A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/resources/resources.py", line 65, in create
    item = self.service.create(
        g.identity,
        resource_requestctx.data or {},
    )
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/invenio_rdm_records/oaiserver/services/services.py", line 123, in create
    self.require_permission(identity, "create")
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py", line 51, in require_permission
    raise PermissionDeniedError(action_name)
invenio_records_resources.services.errors.PermissionDeniedError: create
___________________________ test_unverified_content ____________________________
service = <invenio_rdm_records.services.services.RDMRecordService object at 0x7fc3f140edd0>
minimal_record = {'access': {'files': 'public', 'record': 'public'}, 'files': {'enabled': False}, 'metadata': {'creators': [{'person_or...], 'publication_date': '2020-06-01', 'publisher': 'Acme Inc', 'resource_type': {'id': 'image-photo'}, ...}, 'pids': {}}
unverified_user = <pytest_invenio.user.UserFixtureBase object at 0x7fc3e140b070>
mod_identity = <Identity id="1" auth_type="None" provides={Need(method='system_role', value='authenticated_user'), Need(method='role', value='administration-moderation')}>
    def test_unverified_content(service, minimal_record, unverified_user, mod_identity):
        """Tests verified component when a user is not verified
        For this test, a moderation request is created since the user is not verified
        """
        # Create
        draft = service.create(unverified_user.identity, minimal_record)
        assert draft
        # Publish record
        record = service.publish(unverified_user.identity, draft.id)
        assert record
        # Request was created
        search = current_requests_service.search(mod_identity)
>       assert search.total == 1
E       assert 0 == 1
E        +  where 0 = <invenio_requests.services.requests.results.RequestList object at 0x7fc3dc28bb60>.total
tests/services/components/test_verified_component.py:54: AssertionError
---------------------------- Captured stderr setup -----------------------------
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
[2026-02-17 12:53:55,583] ERROR in api: Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
------------------------------ Captured log setup ------------------------------
ERROR    invenio:api.py:376 Failed to index record 3
Traceback (most recent call last):
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 370, in _actionsiter
    yield self._index_action(payload)
          ~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 416, in _index_action
    index = self.record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_indexer/api.py", line 114, in record_to_index
    result = self._record_to_index(record)
  File "/home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records_resources/services/records/service.py", line 67, in record_to_index
    return record.index._name
           ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'index'
----------------------------- Captured stderr call -----------------------------
'record-view'
'record-view'
[2026-02-17 12:53:55,984] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:53:55,985] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
------------------------------ Captured log call -------------------------------
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
____________________________ test_zip_file_listing _____________________________
running_app = RunningApp(app=<Flask 'invenio'>, superuser_identity=<Identity id="1" auth_type="None" provides={Need(method='system_r...ices.records.results.RecordItem object at 0x7fc3db28eb70>}, moderator_role=<Role be13a36a-7f79-4a0b-9384-2ca526568743>)
db = <SQLAlchemy postgresql+psycopg2://invenio:***@localhost:5432/invenio>
location = pytest-location
minimal_record = {'access': {'files': 'public', 'record': 'public'}, 'files': {'enabled': False}, 'metadata': {'creators': [{'person_or...], 'publication_date': '2020-06-01', 'publisher': 'Acme Inc', 'resource_type': {'id': 'image-photo'}, ...}, 'pids': {}}
identity_simple = <Identity id="2" auth_type="None" provides={Need(method='id', value=2), Need(method='system_role', value='any_user'), Need(method='system_role', value='authenticated_user')}>
search_clear = <OpenSearch([{'host': 'localhost', 'port': 9200}])>
    def test_zip_file_listing(
        running_app, db, location, minimal_record, identity_simple, search_clear
    ):
        """Test setting file metadata."""
        data = minimal_record.copy()
        data["files"] = {"enabled": True}
        data["media_files"] = {"enabled": True}
        service = current_rdm_records_service
        file_service = service.files
        # Create
        draft = service.create(identity_simple, data)
        # Initialize files and add valid metadata
        metadata = {
            "type": "zip",
        }
        service.draft_files.init_files(
            identity_simple,
            draft.id,
            data=[{"key": "test.zip", "metadata": metadata, "access": {"hidden": False}}],
        )
        zip_path = Path(__file__).parent.parent / "data" / "test_zip.zip"
        with open(zip_path, "rb") as f:
            service.draft_files.set_file_content(identity_simple, draft.id, "test.zip", f)
        service.draft_files.commit_file(identity_simple, draft.id, "test.zip")
        # Publish the record
>       record = service.publish(identity_simple, draft.id)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/services/files/test_zip_listing_extraction.py:50: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/invenio_db/uow.py:251: in inner
    res = f(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^
invenio_rdm_records/services/services.py:530: in publish
    return super().publish(identity, id_, uow=uow, expand=expand)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/invenio_db/uow.py:255: in inner
    return f(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/service.py:418: in publish
    self.run_components("publish", identity, draft=draft, record=record, uow=uow)
venv/lib/python3.14/site-packages/invenio_records_resources/services/base/service.py:72: in run_components
    getattr(component, action)(*args, **kwargs)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <invenio_records_resources.services.base.config.Custom_DraftMediaFilesComponent object at 0x7fc3db061310>
identity = <Identity id="2" auth_type="None" provides={Need(method='id', value=2), Need(method='system_role', value='any_user'), Need(method='system_role', value='authenticated_user')}>
draft = {'id': 'bg8rr-bkj09', 'pid': {'pk': 21, 'status': 'N', 'obj_type': 'rec', 'pid_type': 'recid'}, 'pids': {}, 'files': {...hoto'}, 'publication_date': '2020-06-01'}, 'media_files': {'enabled': True}, 'custom_fields': {}, 'internal_notes': []}
record = {'$schema': 'local://records/record-v6.0.0.json', 'pid': {'pk': 21, 'pid_type': 'recid', 'status': 'N', 'obj_type': 'r...publisher': 'Acme Inc', 'resource_type': {'id': 'image-photo'}, 'publication_date': '2020-06-01'}, 'custom_fields': {}}
    def publish(self, identity, draft=None, record=None):
        """Copy bucket and files to record."""
        draft_files = self.get_record_files(draft)
        record_bucket_id = self.get_record_bucket_id(record)
        if draft_files.enabled and draft_files.bucket:
            if not draft_files.items():
>               raise ValidationError(
                    _(
                        "Missing uploaded files. To disable files for "
                        "this record please mark it as metadata-only."
                    ),
                    field_name=f"{self.files_data_key}.enabled",
                )
E               marshmallow.exceptions.ValidationError: Missing uploaded files. To disable files for this record please mark it as metadata-only
venv/lib/python3.14/site-packages/invenio_drafts_resources/services/records/components/base.py:253: ValidationError
---------------------------- Captured stderr setup -----------------------------
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
[2026-02-17 12:54:16,982] DEBUG in ext: Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
Flask-DebugToolbar extension not installed
------------------------------ Captured log setup ------------------------------
DEBUG    invenio:ext.py:99 Flask-DebugToolbar extension not installed
________________ test_cant_create_multiple_grants_for_same_role ________________
running_app = RunningApp(app=<Flask 'invenio'>, superuser_identity=<Identity id="4" auth_type="None" provides={Need(method='id', val...ices.records.results.RecordItem object at 0x7fc3ea833070>}, moderator_role=<Role feecf241-c733-4c4e-bdc1-140c66ac31b7>)
minimal_record = {'access': {'files': 'public', 'record': 'public'}, 'files': {'enabled': False}, 'metadata': {'creators': [{'person_or...], 'publication_date': '2020-06-01', 'publisher': 'Acme Inc', 'resource_type': {'id': 'image-photo'}, ...}, 'pids': {}}
roles = [<Role 3d80feda-92c3-4b8f-a740-d60a86f13be4>, <Role ffaaa279-2c0c-499a-9629-5bd2e51de511>]
    def test_cant_create_multiple_grants_for_same_role(running_app, minimal_record, roles):
        """Test that grant for the same record can not be created more than 1 time for a certain role."""
        # create record
        superuser_identity = running_app.superuser_identity
        records_service = current_rdm_records.records_service
        draft = records_service.create(superuser_identity, minimal_record)
        record = records_service.publish(superuser_identity, draft.id)
        # create grant
        access_service = records_service.access
        grant_payload = {
            "grants": [
                {
                    "subject": {"type": "role", "id": "test"},
                    "permission": "preview",
                }
            ]
        }
>       grant = access_service.bulk_create_grants(
            superuser_identity, record.id, grant_payload
        )
tests/services/test_service_access.py:78: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/invenio_db/uow.py:251: in inner
    res = f(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <invenio_rdm_records.services.access.service.RecordAccessService object at 0x7fc3d34ef770>
identity = <Identity id="4" auth_type="None" provides={Need(method='id', value=4), Need(method='system_role', value='any_user'), ...Need(method='role', value='administration-access'), Need(method='role', value='7294dcb1-dafa-49ba-abbc-4252a916c49e')}>
id_ = 'x9sd1-g7k14'
data = {'grants': [{'permission': 'preview', 'subject': {'id': 'test', 'type': 'role'}}]}
expand = False, uow = <invenio_db.uow.UnitOfWork object at 0x7fc3d2ce8050>
    @unit_of_work()
    def bulk_create_grants(self, identity, id_, data, expand=False, uow=None):
        """Bulk create access grants for a record (resp. its parent)."""
        record, parent = self.get_parent_and_record_or_draft(id_)
        # Permissions
        self.require_permission(identity, "manage", record=record)
        # Validation
        data, __ = self.schema_grants.load(
            data, context={"identity": identity}, raise_errors=True
        )
        grants = data["grants"]
        new_grants = []
        # fail if any of the grants already exist
        if any(
            existing_grant.subject_id == grant["subject"]["id"]
            and existing_grant.subject_type == grant["subject"]["type"]
            for existing_grant in parent.access.grants
            for grant in grants
        ):
            raise GrantExistsError()
        for grant in grants:
            # checks if groups are enabled in the instance
            if (
                not current_app.config.get("USERS_RESOURCES_GROUPS_ENABLED", False)
                and grant["subject"]["type"] == RecordAccessService.group_subject_type
            ):
                raise PermissionDeniedError()
            # Creation
            new_grant = parent.access.grants.create(
                subject_type=grant["subject"]["type"],
                subject_id=grant["subject"]["id"],
                permission=grant["permission"],
                origin=grant.get("origin"),
            )
            if not self._validate_grant_subject(identity, new_grant):
>               raise ValidationError(
                    _("Could not find the specified subject."), field_name="subject.id"
                )
E               marshmallow.exceptions.ValidationError: Could not find the specified subject
invenio_rdm_records/services/access/service.py:430: ValidationError
----------------------------- Captured stderr call -----------------------------
'record-view'
'record-view'
[2026-02-17 12:57:46,413] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:57:46,413] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
------------------------------ Captured log call -------------------------------
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
__________________ test_read_grant_by_subjectid_provide_role ___________________
running_app = RunningApp(app=<Flask 'invenio'>, superuser_identity=<Identity id="20" auth_type="None" provides={Need(method='id', va...ices.records.results.RecordItem object at 0x7fc3ea833070>}, moderator_role=<Role feecf241-c733-4c4e-bdc1-140c66ac31b7>)
minimal_record = {'access': {'files': 'public', 'record': 'public'}, 'files': {'enabled': False}, 'metadata': {'creators': [{'person_or...], 'publication_date': '2020-06-01', 'publisher': 'Acme Inc', 'resource_type': {'id': 'image-photo'}, ...}, 'pids': {}}
roles = [<Role b81bda9c-b064-4282-a770-3b7be0ff1e48>, <Role cf90b336-6374-49c8-8872-9e718fe7c216>]
    def test_read_grant_by_subjectid_provide_role(running_app, minimal_record, roles):
        """Test read grant by user id while searching by role"""
        # create record
        superuser_identity = running_app.superuser_identity
        records_service = current_rdm_records.records_service
        draft = records_service.create(superuser_identity, minimal_record)
        record = records_service.publish(superuser_identity, draft.id)
        # create grant for role "test"
        subject_type = "user"
        access_service = records_service.access
        grant_payload = {
            "grants": [
                {
                    "subject": {"type": "role", "id": "test"},
                    "permission": "preview",
                }
            ]
        }
>       access_service.bulk_create_grants(superuser_identity, record.id, grant_payload)
tests/services/test_service_access.py:315: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/invenio_db/uow.py:251: in inner
    res = f(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <invenio_rdm_records.services.access.service.RecordAccessService object at 0x7fc3d34ef770>
identity = <Identity id="20" auth_type="None" provides={Need(method='id', value=20), Need(method='system_role', value='any_user')...Need(method='role', value='administration-access'), Need(method='role', value='43cb566c-ba98-499c-bad7-413e5ac0b0b2')}>
id_ = 'tqj9z-skh97'
data = {'grants': [{'permission': 'preview', 'subject': {'id': 'test', 'type': 'role'}}]}
expand = False, uow = <invenio_db.uow.UnitOfWork object at 0x7fc3d2450e90>
    @unit_of_work()
    def bulk_create_grants(self, identity, id_, data, expand=False, uow=None):
        """Bulk create access grants for a record (resp. its parent)."""
        record, parent = self.get_parent_and_record_or_draft(id_)
        # Permissions
        self.require_permission(identity, "manage", record=record)
        # Validation
        data, __ = self.schema_grants.load(
            data, context={"identity": identity}, raise_errors=True
        )
        grants = data["grants"]
        new_grants = []
        # fail if any of the grants already exist
        if any(
            existing_grant.subject_id == grant["subject"]["id"]
            and existing_grant.subject_type == grant["subject"]["type"]
            for existing_grant in parent.access.grants
            for grant in grants
        ):
            raise GrantExistsError()
        for grant in grants:
            # checks if groups are enabled in the instance
            if (
                not current_app.config.get("USERS_RESOURCES_GROUPS_ENABLED", False)
                and grant["subject"]["type"] == RecordAccessService.group_subject_type
            ):
                raise PermissionDeniedError()
            # Creation
            new_grant = parent.access.grants.create(
                subject_type=grant["subject"]["type"],
                subject_id=grant["subject"]["id"],
                permission=grant["permission"],
                origin=grant.get("origin"),
            )
            if not self._validate_grant_subject(identity, new_grant):
>               raise ValidationError(
                    _("Could not find the specified subject."), field_name="subject.id"
                )
E               marshmallow.exceptions.ValidationError: Could not find the specified subject
invenio_rdm_records/services/access/service.py:430: ValidationError
----------------------------- Captured stderr call -----------------------------
'record-view'
'record-view'
[2026-02-17 12:57:51,266] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:57:51,267] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
------------------------------ Captured log call -------------------------------
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
_________________ test_delete_grant_by_subjectid_provide_role __________________
running_app = RunningApp(app=<Flask 'invenio'>, superuser_identity=<Identity id="30" auth_type="None" provides={Need(method='id', va...ices.records.results.RecordItem object at 0x7fc3ea833070>}, moderator_role=<Role feecf241-c733-4c4e-bdc1-140c66ac31b7>)
minimal_record = {'access': {'files': 'public', 'record': 'public'}, 'files': {'enabled': False}, 'metadata': {'creators': [{'person_or...], 'publication_date': '2020-06-01', 'publisher': 'Acme Inc', 'resource_type': {'id': 'image-photo'}, ...}, 'pids': {}}
roles = [<Role 73df2001-140c-4ac2-afd8-2fdaa37166b4>, <Role e12fa656-4471-4637-9946-13f5d5adcf2d>]
    def test_delete_grant_by_subjectid_provide_role(running_app, minimal_record, roles):
        """Test delete grant by user id while searching by role"""
        # create record
        superuser_identity = running_app.superuser_identity
        records_service = current_rdm_records.records_service
        draft = records_service.create(superuser_identity, minimal_record)
        record = records_service.publish(superuser_identity, draft.id)
        # create grant for role "test"
        subject_type = "user"
        access_service = records_service.access
        grant_payload = {
            "grants": [
                {
                    "subject": {"type": "role", "id": "test"},
                    "permission": "preview",
                }
            ]
        }
>       access_service.bulk_create_grants(superuser_identity, record.id, grant_payload)
tests/services/test_service_access.py:426: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/invenio_db/uow.py:251: in inner
    res = f(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <invenio_rdm_records.services.access.service.RecordAccessService object at 0x7fc3d34ef770>
identity = <Identity id="30" auth_type="None" provides={Need(method='id', value=30), Need(method='system_role', value='any_user')...Need(method='role', value='administration-access'), Need(method='role', value='59e141d1-5201-4f24-b252-b4fb125dda80')}>
id_ = '7yvnp-xky61'
data = {'grants': [{'permission': 'preview', 'subject': {'id': 'test', 'type': 'role'}}]}
expand = False, uow = <invenio_db.uow.UnitOfWork object at 0x7fc3d206ca70>
    @unit_of_work()
    def bulk_create_grants(self, identity, id_, data, expand=False, uow=None):
        """Bulk create access grants for a record (resp. its parent)."""
        record, parent = self.get_parent_and_record_or_draft(id_)
        # Permissions
        self.require_permission(identity, "manage", record=record)
        # Validation
        data, __ = self.schema_grants.load(
            data, context={"identity": identity}, raise_errors=True
        )
        grants = data["grants"]
        new_grants = []
        # fail if any of the grants already exist
        if any(
            existing_grant.subject_id == grant["subject"]["id"]
            and existing_grant.subject_type == grant["subject"]["type"]
            for existing_grant in parent.access.grants
            for grant in grants
        ):
            raise GrantExistsError()
        for grant in grants:
            # checks if groups are enabled in the instance
            if (
                not current_app.config.get("USERS_RESOURCES_GROUPS_ENABLED", False)
                and grant["subject"]["type"] == RecordAccessService.group_subject_type
            ):
                raise PermissionDeniedError()
            # Creation
            new_grant = parent.access.grants.create(
                subject_type=grant["subject"]["type"],
                subject_id=grant["subject"]["id"],
                permission=grant["permission"],
                origin=grant.get("origin"),
            )
            if not self._validate_grant_subject(identity, new_grant):
>               raise ValidationError(
                    _("Could not find the specified subject."), field_name="subject.id"
                )
E               marshmallow.exceptions.ValidationError: Could not find the specified subject
invenio_rdm_records/services/access/service.py:430: ValidationError
----------------------------- Captured stderr call -----------------------------
'record-view'
'record-view'
[2026-02-17 12:57:54,478] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:57:54,479] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
------------------------------ Captured log call -------------------------------
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
____________________ test_read_all_grants_by_subject_found _____________________
running_app = RunningApp(app=<Flask 'invenio'>, superuser_identity=<Identity id="31" auth_type="None" provides={Need(method='system_...ices.records.results.RecordItem object at 0x7fc3ea833070>}, moderator_role=<Role feecf241-c733-4c4e-bdc1-140c66ac31b7>)
minimal_record = {'access': {'files': 'public', 'record': 'public'}, 'files': {'enabled': False}, 'metadata': {'creators': [{'person_or...], 'publication_date': '2020-06-01', 'publisher': 'Acme Inc', 'resource_type': {'id': 'image-photo'}, ...}, 'pids': {}}
users = [<User 32>, <User 33>]
roles = [<Role e48fd1eb-fd30-480e-9d5c-3dd0c43d01d1>, <Role 3fe2c2dc-60d3-4bb2-b72c-4ec0d1b38887>]
    def test_read_all_grants_by_subject_found(running_app, minimal_record, users, roles):
        """Test read user grants."""
        # create record
        superuser_identity = running_app.superuser_identity
        records_service = current_rdm_records.records_service
        draft = records_service.create(superuser_identity, minimal_record)
        record = records_service.publish(superuser_identity, draft.id)
        # create user grants
        subject_type = "user"
        access_service = records_service.access
        user_id = str(users[0].id)
        user_id2 = str(users[1].id)
        grant_payload = {
            "grants": [
                {
                    "subject": {"type": "user", "id": user_id},
                    "permission": "preview",
                }
            ]
        }
        grant_payload2 = {
            "grants": [
                {
                    "subject": {"type": "user", "id": user_id2},
                    "permission": "preview",
                }
            ]
        }
        access_service.bulk_create_grants(superuser_identity, record.id, grant_payload)
        access_service.bulk_create_grants(superuser_identity, record.id, grant_payload2)
        # create role grants
        grant_payload = {
            "grants": [
                {
                    "subject": {"type": "role", "id": "test"},
                    "permission": "preview",
                }
            ]
        }
>       access_service.bulk_create_grants(superuser_identity, record.id, grant_payload)
tests/services/test_service_access.py:477: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/invenio_db/uow.py:251: in inner
    res = f(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <invenio_rdm_records.services.access.service.RecordAccessService object at 0x7fc3d34ef770>
identity = <Identity id="31" auth_type="None" provides={Need(method='system_role', value='any_user'), Need(method='id', value=31)...Need(method='role', value='administration-access'), Need(method='role', value='507bb7a8-f538-431e-897d-f779f5db4481')}>
id_ = 'n3xq1-pmp93'
data = {'grants': [{'permission': 'preview', 'subject': {'id': 'test', 'type': 'role'}}]}
expand = False, uow = <invenio_db.uow.UnitOfWork object at 0x7fc3d1f64170>
    @unit_of_work()
    def bulk_create_grants(self, identity, id_, data, expand=False, uow=None):
        """Bulk create access grants for a record (resp. its parent)."""
        record, parent = self.get_parent_and_record_or_draft(id_)
        # Permissions
        self.require_permission(identity, "manage", record=record)
        # Validation
        data, __ = self.schema_grants.load(
            data, context={"identity": identity}, raise_errors=True
        )
        grants = data["grants"]
        new_grants = []
        # fail if any of the grants already exist
        if any(
            existing_grant.subject_id == grant["subject"]["id"]
            and existing_grant.subject_type == grant["subject"]["type"]
            for existing_grant in parent.access.grants
            for grant in grants
        ):
            raise GrantExistsError()
        for grant in grants:
            # checks if groups are enabled in the instance
            if (
                not current_app.config.get("USERS_RESOURCES_GROUPS_ENABLED", False)
                and grant["subject"]["type"] == RecordAccessService.group_subject_type
            ):
                raise PermissionDeniedError()
            # Creation
            new_grant = parent.access.grants.create(
                subject_type=grant["subject"]["type"],
                subject_id=grant["subject"]["id"],
                permission=grant["permission"],
                origin=grant.get("origin"),
            )
            if not self._validate_grant_subject(identity, new_grant):
>               raise ValidationError(
                    _("Could not find the specified subject."), field_name="subject.id"
                )
E               marshmallow.exceptions.ValidationError: Could not find the specified subject
invenio_rdm_records/services/access/service.py:430: ValidationError
----------------------------- Captured stderr call -----------------------------
'record-view'
'record-view'
[2026-02-17 12:57:55,278] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:57:55,279] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
------------------------------ Captured log call -------------------------------
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
__________________ test_read_all_grants_by_subject_not_found ___________________
running_app = RunningApp(app=<Flask 'invenio'>, superuser_identity=<Identity id="34" auth_type="None" provides={Need(method='system_...ices.records.results.RecordItem object at 0x7fc3ea833070>}, moderator_role=<Role feecf241-c733-4c4e-bdc1-140c66ac31b7>)
minimal_record = {'access': {'files': 'public', 'record': 'public'}, 'files': {'enabled': False}, 'metadata': {'creators': [{'person_or...], 'publication_date': '2020-06-01', 'publisher': 'Acme Inc', 'resource_type': {'id': 'image-photo'}, ...}, 'pids': {}}
users = [<User 35>, <User 36>]
roles = [<Role df4f0639-d141-4785-b9e2-c691cf490f14>, <Role 9cc56d29-105b-4711-9868-d50e32e1bc0e>]
    def test_read_all_grants_by_subject_not_found(
        running_app, minimal_record, users, roles
    ):
        """Test read user grants. Not found."""
        # create record
        superuser_identity = running_app.superuser_identity
        records_service = current_rdm_records.records_service
        draft = records_service.create(superuser_identity, minimal_record)
        record = records_service.publish(superuser_identity, draft.id)
        access_service = records_service.access
        # create role grants
        grant_payload = {
            "grants": [
                {
                    "subject": {"type": "role", "id": "test"},
                    "permission": "preview",
                }
            ]
        }
>       access_service.bulk_create_grants(superuser_identity, record.id, grant_payload)
tests/services/test_service_access.py:510: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/invenio_db/uow.py:251: in inner
    res = f(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <invenio_rdm_records.services.access.service.RecordAccessService object at 0x7fc3d34ef770>
identity = <Identity id="34" auth_type="None" provides={Need(method='system_role', value='any_user'), Need(method='system_role', ...ministration-access'), Need(method='id', value=34), Need(method='role', value='03971101-9d2b-4743-827c-685fd71ba7c2')}>
id_ = 'xw76n-zz374'
data = {'grants': [{'permission': 'preview', 'subject': {'id': 'test', 'type': 'role'}}]}
expand = False, uow = <invenio_db.uow.UnitOfWork object at 0x7fc3d1e82ff0>
    @unit_of_work()
    def bulk_create_grants(self, identity, id_, data, expand=False, uow=None):
        """Bulk create access grants for a record (resp. its parent)."""
        record, parent = self.get_parent_and_record_or_draft(id_)
        # Permissions
        self.require_permission(identity, "manage", record=record)
        # Validation
        data, __ = self.schema_grants.load(
            data, context={"identity": identity}, raise_errors=True
        )
        grants = data["grants"]
        new_grants = []
        # fail if any of the grants already exist
        if any(
            existing_grant.subject_id == grant["subject"]["id"]
            and existing_grant.subject_type == grant["subject"]["type"]
            for existing_grant in parent.access.grants
            for grant in grants
        ):
            raise GrantExistsError()
        for grant in grants:
            # checks if groups are enabled in the instance
            if (
                not current_app.config.get("USERS_RESOURCES_GROUPS_ENABLED", False)
                and grant["subject"]["type"] == RecordAccessService.group_subject_type
            ):
                raise PermissionDeniedError()
            # Creation
            new_grant = parent.access.grants.create(
                subject_type=grant["subject"]["type"],
                subject_id=grant["subject"]["id"],
                permission=grant["permission"],
                origin=grant.get("origin"),
            )
            if not self._validate_grant_subject(identity, new_grant):
>               raise ValidationError(
                    _("Could not find the specified subject."), field_name="subject.id"
                )
E               marshmallow.exceptions.ValidationError: Could not find the specified subject
invenio_rdm_records/services/access/service.py:430: ValidationError
----------------------------- Captured stderr call -----------------------------
'record-view'
'record-view'
[2026-02-17 12:57:56,171] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:57:56,172] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
------------------------------ Captured log call -------------------------------
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
____________________ test_update_grant_by_subject_not_found ____________________
running_app = RunningApp(app=<Flask 'invenio'>, superuser_identity=<Identity id="40" auth_type="None" provides={Need(method='system_...ices.records.results.RecordItem object at 0x7fc3ea833070>}, moderator_role=<Role feecf241-c733-4c4e-bdc1-140c66ac31b7>)
minimal_record = {'access': {'files': 'public', 'record': 'public'}, 'files': {'enabled': False}, 'metadata': {'creators': [{'person_or...], 'publication_date': '2020-06-01', 'publisher': 'Acme Inc', 'resource_type': {'id': 'image-photo'}, ...}, 'pids': {}}
roles = [<Role 96b47cc9-4cf0-4d71-888a-58989a21cf4f>, <Role 406b861d-bf8a-4e4c-a2c3-edbd57f10e7d>]
    def test_update_grant_by_subject_not_found(running_app, minimal_record, roles):
        """Test partial update of user grant. Not found."""
        # create record
        superuser_identity = running_app.superuser_identity
        records_service = current_rdm_records.records_service
        draft = records_service.create(superuser_identity, minimal_record)
        record = records_service.publish(superuser_identity, draft.id)
        # create role grant
        access_service = records_service.access
        grant_payload = {
            "grants": [
                {
                    "subject": {"type": "role", "id": "test"},
                    "permission": "preview",
                    "origin": "origin",
                }
            ]
        }
>       access_service.bulk_create_grants(superuser_identity, record.id, grant_payload)
tests/services/test_service_access.py:580: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.14/site-packages/invenio_db/uow.py:251: in inner
    res = f(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <invenio_rdm_records.services.access.service.RecordAccessService object at 0x7fc3d34ef770>
identity = <Identity id="40" auth_type="None" provides={Need(method='system_role', value='any_user'), Need(method='role', value='...m_role', value='authenticated_user'), Need(method='role', value='administration-access'), Need(method='id', value=40)}>
id_ = 'n1k33-w8j18'
data = {'grants': [{'origin': 'origin', 'permission': 'preview', 'subject': {'id': 'test', 'type': 'role'}}]}
expand = False, uow = <invenio_db.uow.UnitOfWork object at 0x7fc3d1d1d370>
    @unit_of_work()
    def bulk_create_grants(self, identity, id_, data, expand=False, uow=None):
        """Bulk create access grants for a record (resp. its parent)."""
        record, parent = self.get_parent_and_record_or_draft(id_)
        # Permissions
        self.require_permission(identity, "manage", record=record)
        # Validation
        data, __ = self.schema_grants.load(
            data, context={"identity": identity}, raise_errors=True
        )
        grants = data["grants"]
        new_grants = []
        # fail if any of the grants already exist
        if any(
            existing_grant.subject_id == grant["subject"]["id"]
            and existing_grant.subject_type == grant["subject"]["type"]
            for existing_grant in parent.access.grants
            for grant in grants
        ):
            raise GrantExistsError()
        for grant in grants:
            # checks if groups are enabled in the instance
            if (
                not current_app.config.get("USERS_RESOURCES_GROUPS_ENABLED", False)
                and grant["subject"]["type"] == RecordAccessService.group_subject_type
            ):
                raise PermissionDeniedError()
            # Creation
            new_grant = parent.access.grants.create(
                subject_type=grant["subject"]["type"],
                subject_id=grant["subject"]["id"],
                permission=grant["permission"],
                origin=grant.get("origin"),
            )
            if not self._validate_grant_subject(identity, new_grant):
>               raise ValidationError(
                    _("Could not find the specified subject."), field_name="subject.id"
                )
E               marshmallow.exceptions.ValidationError: Could not find the specified subject
invenio_rdm_records/services/access/service.py:430: ValidationError
----------------------------- Captured stderr call -----------------------------
'record-view'
'record-view'
[2026-02-17 12:57:57,773] WARNING in api: 'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-view'
'record-download'
'record-download'
[2026-02-17 12:57:57,774] WARNING in api: 'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
'record-download'
------------------------------ Captured log call -------------------------------
WARNING  invenio:api.py:38 'record-view'
WARNING  invenio:api.py:54 'record-download'
=============================== warnings summary ===============================
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:9
    pyparsing.ParserElement.enablePackrat()
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:52
    oneThru12 = oneOf(["%.2d" % i for i in range(1, 13)])
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:53
    oneThru13 = oneOf(["%.2d" % i for i in range(1, 14)])
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:54
    oneThru23 = oneOf(["%.2d" % i for i in range(1, 24)])
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:55
    zeroThru23 = oneOf(["%.2d" % i for i in range(0, 24)])
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:56
    oneThru29 = oneOf(["%.2d" % i for i in range(1, 30)])
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:57
    oneThru30 = oneOf(["%.2d" % i for i in range(1, 31)])
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:58
    oneThru31 = oneOf(["%.2d" % i for i in range(1, 32)])
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:59
    oneThru59 = oneOf(["%.2d" % i for i in range(1, 60)])
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:60
    zeroThru59 = oneOf(["%.2d" % i for i in range(0, 60)])
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:63
    positiveDigit = Word(nums, exact=1, excludeChars="0")
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:73
    (oneOf("01 03 05 07 08 10 12")("month") + "-" + oneThru31("day"))
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:74
    ^ (oneOf("04 06 09 11")("month") + "-" + oneThru30("day"))
    p.addParseAction(cls.parse_action)
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:119
    UASymbol = Combine(oneOf("? ~ %"))
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:122
    seasonNumber = oneOf("21 22 23 24")
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:155
    l1Start.addParseAction(f)
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:157
    l1End.addParseAction(f)
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:199
    monthWithX = Combine(oneOf("0X 1X") ^ ("X" + digitOrX))("month")
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:303
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:303
    earlier = L("..").addParseAction(f)("lower") + date("upper").addParseAction(f)
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:304
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:304
    later = date("lower").addParseAction(f) + L("..").addParseAction(f)("upper")
venv/lib/python3.14/site-packages/edtf/parser/grammar.py:325
    seasonL2Number = oneOf("21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41")
invenio_rdm_records/config.py:16
    import idutils
invenio_rdm_records/services/facets.py:75
    warn(
venv/lib/python3.14/site-packages/webargs/compat.py:8
    MARSHMALLOW_VERSION_INFO = tuple(LooseVersion(ma.__version__).version)  # type: tuple
venv/lib/python3.14/site-packages/webargs/compat.py:8
    MARSHMALLOW_VERSION_INFO = tuple(LooseVersion(ma.__version__).version)  # type: tuple
venv/lib/python3.14/site-packages/webargs/__init__.py:13
    __version_info__ = tuple(LooseVersion(__version__).version)
venv/lib/python3.14/site-packages/datacite/jsonutils.py:15
venv/lib/python3.14/site-packages/datacite/jsonutils.py:15
    from jsonschema import RefResolver, validate
venv/lib/python3.14/site-packages/tripoli/resource_validators/base_validator.py:611
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/tripoli/resource_validators/base_validator.py:611: SyntaxWarning: 'return' in a 'finally' block
    return value
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records/api.py:334: SAWarning: nested transaction already deassociated from connection
    with db.session.begin_nested():
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py:193: SAWarning: nested transaction already deassociated from connection
    self.session.commit()
    self.init_app(app)
tests/fixtures/test_cli.py::test_create_fake_demo_draft_record
tests/fixtures/test_cli.py::test_create_fake_demo_inclusion_requests
    parsed_date = parser.parseString(f_date)[0]
    p = edtfParser.parseString(input_string.strip(), parseAll)
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records/api.py:442: SAWarning: nested transaction already deassociated from connection
    with db.session.begin_nested():
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/pytest_invenio/fixtures.py:579: SAWarning: nested transaction already deassociated from connection
    self._transaction.rollback(_to_root=False)
tests/records/dumpers/test_pids_dumper.py::test_esdumper_with_externalpidsext
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/tests/records/dumpers/test_pids_dumper.py:37: SAWarning: nested transaction already deassociated from connection
    db.session.commit()
tests/records/test_records_communities.py::test_community_integration
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/tests/records/test_records_communities.py:43: SAWarning: nested transaction already deassociated from connection
    db.session.commit()
tests/resources/test_files.py::test_published_record_files_allow_edit
tests/services/files/test_revert_of_deleted_files_in_published_record.py::test_revert_of_deleted_files_in_published_record
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_files_rest/models.py:719: SAWarning: Object of type <ObjectVersion> not in session, add operation along 'Bucket.objects' will not proceed (This warning originated from the Session 'autoflush' process, which was invoked automatically in response to a user-initiated operation. Consider using ``no_autoflush`` context manager if this warning happened while initializing objects.)
    return db.session.query(cls).filter_by(id=file_id).one_or_none()
tests/resources/test_request_deletion.py::test_request_flow
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/tests/resources/test_request_deletion.py:57: SAWarning: nested transaction already deassociated from connection
    db.session.commit()
tests/resources/test_resources_communities.py::test_remove_another_community
tests/resources/test_resources_communities.py::test_search_communities
tests/resources/test_resources_communities.py::test_republish_with_mulitple_communities
tests/resources/test_resources_communities.py::test_remove_record_last_community_with_multiple_communities
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/tests/resources/test_resources_communities.py:31: SAWarning: nested transaction already deassociated from connection
    db.session.commit()
tests/resources/test_serialized_links.py::test_draft_links
tests/secret_links/test_sharing.py::test_read_restricted_record_with_secret_link
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/tests/secret_links/test_sharing.py:200: SAWarning: nested transaction already deassociated from connection
    db.session.commit()
tests/services/files/test_revert_of_deleted_files_in_published_record.py::test_revert_of_deleted_files_in_published_record
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records/api.py:495: SAWarning: nested transaction already deassociated from connection
    with db.session.begin_nested():
tests/services/files/test_revert_of_deleted_files_in_published_record.py::test_revert_of_deleted_files_in_published_record
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_records/api.py:548: SAWarning: nested transaction already deassociated from connection
    with db.session.begin_nested():
tests/services/files/test_zip_listing_extraction.py::test_zip_file_listing
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py:204: SAWarning: nested transaction already deassociated from connection
    self.session.rollback()
tests/services/test_deletion_policy.py::test_grace_period_policy
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/tests/services/test_deletion_policy.py:37: SAWarning: nested transaction already deassociated from connection
    db.session.commit()
tests/services/test_deletion_policy.py::test_deletion_policy_fallback_to_request
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/tests/services/test_deletion_policy.py:95: SAWarning: nested transaction already deassociated from connection
    db.session.commit()
tests/services/test_rdm_service.py::test_publish_public_record_versions_no_or_external_doi_managed_doi
tests/services/test_rdm_service.py::test_publish_public_record_versions_managed_doi_external_doi
tests/services/test_rdm_service.py::test_publish_public_record_versions_managed_doi_no_doi
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/invenio_db/uow.py:212: SAWarning: nested transaction already deassociated from connection
    self.session.commit()
tests/services/test_record_deletion_request.py::test_request_deletion_request_only
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/tests/services/test_record_deletion_request.py:77: SAWarning: nested transaction already deassociated from connection
    db.session.commit()
tests/services/test_record_deletion_request.py::test_request_deletion_duplicate_prevention
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/tests/services/test_record_deletion_request.py:107: SAWarning: nested transaction already deassociated from connection
    db.session.commit()
tests/services/test_record_deletion_request.py::test_request_deletion_invalid_reason
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/tests/services/test_record_deletion_request.py:137: SAWarning: nested transaction already deassociated from connection
    db.session.commit()
tests/services/test_service_community_records.py::test_remove_record_of_other_community
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/tests/services/test_service_community_records.py:95: SAWarning: nested transaction already deassociated from connection
    db.session.commit()
tests/tokens/test_resource_access.py::test_rat_validation_failed
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/jwt/api_jwt.py:153: InsecureKeyLengthWarning: The HMAC key is 10 bytes long, which is below the minimum recommended length of 32 bytes for SHA256. See RFC 7518 Section 3.2
    return self._jws.encode(
tests/tokens/test_resource_access.py::test_rat_validation_failed
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/jwt/api_jwt.py:371: InsecureKeyLengthWarning: The HMAC key is 10 bytes long, which is below the minimum recommended length of 32 bytes for SHA256. See RFC 7518 Section 3.2
    decoded = self.decode_complete(
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/jwt/api_jwt.py:153: InsecureKeyLengthWarning: The HMAC key is 9 bytes long, which is below the minimum recommended length of 32 bytes for SHA256. See RFC 7518 Section 3.2
    return self._jws.encode(
  /home/runner/work/test-zip-extract-repository/test-zip-extract-repository/workdir/tests/invenio-rdm-records/original/.venv/lib/python3.14/site-packages/jwt/api_jwt.py:371: InsecureKeyLengthWarning: The HMAC key is 9 bytes long, which is below the minimum recommended length of 32 bytes for SHA256. See RFC 7518 Section 3.2
    decoded = self.decode_complete(
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.14.2-final-0 ________________
Name                                                                                            Stmts   Miss  Cover   Missing
invenio_rdm_records/__init__.py                                                                     3      0   100%
invenio_rdm_records/access_requests_ui/__init__.py                                                  0      0   100%
invenio_rdm_records/access_requests_ui/views.py                                                    31     19    39%   32-52, 58-64
invenio_rdm_records/administration/__init__.py                                                      0      0   100%
invenio_rdm_records/administration/views/__init__.py                                                0      0   100%
invenio_rdm_records/administration/views/oai.py                                                    52      0   100%
invenio_rdm_records/alembic/0cf260eb8e97_create_table_for_secret_links.py                          13      4    69%   23-32, 42-46
invenio_rdm_records/alembic/4a15e8671f4d_create_rdm_records_tables.py                              30     20    33%   26-269, 279-297
invenio_rdm_records/alembic/8ed1a438601c_migrate_secret_links.py                                    8      1    88%   22
invenio_rdm_records/alembic/9e0ac518b9df_create_records_communities_m2m_table.py                   11      2    82%   23, 54
invenio_rdm_records/alembic/88d1463de5c0_create_parent_record_table.py                             30     20    33%   25-101, 129-146
invenio_rdm_records/alembic/912251a56a49_change_datetime_types.py                                  23     16    30%   25-53, 60-86
invenio_rdm_records/alembic/2186256e8d9b_add_deletion_status_to_rdmrecords.py                      31     22    29%   22-43, 49-74, 79-80
invenio_rdm_records/alembic/1746626978_drop_rdmrecordquota_user_id_unique_.py                       9      2    78%   21, 28
invenio_rdm_records/alembic/__init__.py                                                             0      0   100%
invenio_rdm_records/alembic/a2a6819f14f1_create_files_and_media_files_versioning_.py               26     16    38%   25-137, 148-175
invenio_rdm_records/alembic/a6bfa06b1a6d_add_origin_and_description_to_secret_links.py             12      4    67%   22-26, 34-35
invenio_rdm_records/alembic/a3957490361d_remove_pidrelations_tables.py                             14      6    57%   22-26, 32
invenio_rdm_records/alembic/b822ba22c688_create_rdm_records_branch.py                               8      2    75%   20, 25
invenio_rdm_records/alembic/cfcb8cb78708_create_access_request_tokens_table.py                     13      4    69%   23-37, 47-51
invenio_rdm_records/alembic/faf0cefa79a0_create_record_quota_tables.py                             13      4    69%   23-43, 65-66
invenio_rdm_records/alembic/ff9bec971d30_add_indexes.py                                            31     24    23%   21-87, 97-136
invenio_rdm_records/alembic/ff860d48fb4b_create_media_files_table.py                               28     18    36%   25-149, 164-184
invenio_rdm_records/alembic/ffd725001655_add_field_to_record_consent_to_share_.py                  10      2    80%   23, 35
invenio_rdm_records/checks/__init__.py                                                              0      0   100%
invenio_rdm_records/checks/requests.py                                                             72     51    29%   32-45, 53-73, 103-123, 131-152
invenio_rdm_records/cli.py                                                                        187     90    52%   65-66, 89-102, 125-132, 155-162, 185-192, 215-239, 262-275, 282-286, 301-305, 312-344, 372-373, 382-386, 409-411
invenio_rdm_records/config.py                                                                     170      0   100%
invenio_rdm_records/contrib/__init__.py                                                             0      0   100%
invenio_rdm_records/contrib/codemeta/__init__.py                                                    2      0   100%
invenio_rdm_records/contrib/codemeta/custom_fields.py                                              10      0   100%
invenio_rdm_records/contrib/codemeta/processors.py                                                 15     12    20%   17-34
invenio_rdm_records/contrib/imprint/__init__.py                                                     2      0   100%
invenio_rdm_records/contrib/imprint/custom_fields.py                                               15      2    87%   30, 48
invenio_rdm_records/contrib/imprint/processors.py                                                  56     41    27%   26-43, 58-95
invenio_rdm_records/contrib/journal/__init__.py                                                     3      0   100%
invenio_rdm_records/contrib/journal/custom_fields.py                                               15      2    87%   29, 47
invenio_rdm_records/contrib/journal/processors.py                                                 107     60    44%   25-48, 63-88, 116, 121, 139-156, 171-188
invenio_rdm_records/contrib/journal/sort.py                                                         2      0   100%
invenio_rdm_records/contrib/meeting/__init__.py                                                     3      0   100%
invenio_rdm_records/contrib/meeting/custom_fields.py                                               17      2    88%   38, 63
invenio_rdm_records/contrib/meeting/processors.py                                                  31     16    48%   24-37, 52-63
invenio_rdm_records/contrib/meeting/sort.py                                                         2      0   100%
invenio_rdm_records/contrib/thesis/__init__.py                                                      2      0   100%
invenio_rdm_records/contrib/thesis/custom_fields.py                                                14      2    86%   28, 41
invenio_rdm_records/ext.py                                                                        111      3    97%   134, 140, 146
invenio_rdm_records/fixtures/__init__.py                                                           25     12    52%   32, 36-59, 67-71
invenio_rdm_records/fixtures/communities.py                                                        12      0   100%
invenio_rdm_records/fixtures/data/vocabularies/languages.py                                        15      7    53%   34-41, 46-47, 51-52
invenio_rdm_records/fixtures/demo.py                                                              111     18    84%   46-49, 74-85, 99, 116, 345-354
invenio_rdm_records/fixtures/fixture.py                                                            28      8    71%   34, 49-57, 62
invenio_rdm_records/fixtures/records.py                                                             5      0   100%
invenio_rdm_records/fixtures/tasks.py                                                             118     13    89%   58-59, 78, 85-90, 96-99, 165, 217-218
invenio_rdm_records/fixtures/users.py                                                              44      3    93%   81-83
invenio_rdm_records/fixtures/vocabularies.py                                                      212     30    86%   60-71, 75-81, 89-91, 99-103, 192, 399-400
invenio_rdm_records/jobs/__init__.py                                                                0      0   100%
invenio_rdm_records/jobs/jobs.py                                                                    4      0   100%
invenio_rdm_records/notifications/__init__.py                                                       0      0   100%
invenio_rdm_records/notifications/builders.py                                                     151      4    97%   112, 144, 289, 324
invenio_rdm_records/oai.py                                                                         59      6    90%   114-118, 133-135
invenio_rdm_records/oaiserver/__init__.py                                                           0      0   100%
invenio_rdm_records/oaiserver/resources/__init__.py                                                 0      0   100%
invenio_rdm_records/oaiserver/resources/config.py                                                  19      0   100%
invenio_rdm_records/oaiserver/resources/resources.py                                               46      9    80%   54-59, 69, 80, 88-93, 103, 113
invenio_rdm_records/oaiserver/services/__init__.py                                                  0      0   100%
invenio_rdm_records/oaiserver/services/config.py                                                   28      0   100%
invenio_rdm_records/oaiserver/services/errors.py                                                   17      3    82%   28, 42, 52
invenio_rdm_records/oaiserver/services/permissions.py                                               9      0   100%
invenio_rdm_records/oaiserver/services/results.py                                                  59     22    63%   37, 76-82, 86, 90, 95, 100-111, 116, 127-138
invenio_rdm_records/oaiserver/services/schema.py                                                   18      0   100%
invenio_rdm_records/oaiserver/services/services.py                                                115     28    76%   41-45, 49-53, 90, 111, 135, 148-150, 159-185, 226-228, 233-250
invenio_rdm_records/oaiserver/services/uow.py                                                      14      3    79%   33-34, 38
invenio_rdm_records/proxies.py                                                                     14      0   100%
invenio_rdm_records/records/__init__.py                                                             2      0   100%
invenio_rdm_records/records/api.py                                                                137      3    98%   357-361
invenio_rdm_records/records/dumpers/__init__.py                                                     8      0   100%
invenio_rdm_records/records/dumpers/access.py                                                      22      2    91%   50-51
invenio_rdm_records/records/dumpers/combined_subjects.py                                           21      0   100%
invenio_rdm_records/records/dumpers/edtf.py                                                        50      0   100%
invenio_rdm_records/records/dumpers/locations.py                                                   24      0   100%
invenio_rdm_records/records/dumpers/pids.py                                                        17      0   100%
invenio_rdm_records/records/dumpers/statistics.py                                                  21      2    90%   48-49
invenio_rdm_records/records/dumpers/subject_hierarchy.py                                           31     16    48%   71-88, 93-97
invenio_rdm_records/records/jsonschemas/__init__.py                                                 0      0   100%
invenio_rdm_records/records/mappings/__init__.py                                                    0      0   100%
invenio_rdm_records/records/mappings/os-v1/__init__.py                                              0      0   100%
invenio_rdm_records/records/mappings/os-v2/__init__.py                                              0      0   100%
invenio_rdm_records/records/mappings/v7/__init__.py                                                 0      0   100%
invenio_rdm_records/records/models.py                                                              84      1    99%   145
invenio_rdm_records/records/processors/base.py                                                      8      3    62%   16, 20, 25
invenio_rdm_records/records/processors/tiles.py                                                    74     53    28%   27, 47, 52, 57-59, 63-82, 92-142, 152-183
invenio_rdm_records/records/stats/__init__.py                                                       2      0   100%
invenio_rdm_records/records/stats/api.py                                                           25      3    88%   25, 32, 48
invenio_rdm_records/records/stats/templates/__init__.py                                             0      0   100%
invenio_rdm_records/records/stats/templates/aggregations/__init__.py                                0      0   100%
invenio_rdm_records/records/stats/templates/aggregations/aggr_file_download/__init__.py             0      0   100%
invenio_rdm_records/records/stats/templates/aggregations/aggr_file_download/os-v1/__init__.py       0      0   100%
invenio_rdm_records/records/stats/templates/aggregations/aggr_file_download/os-v2/__init__.py       0      0   100%
invenio_rdm_records/records/stats/templates/aggregations/aggr_file_download/v7/__init__.py          0      0   100%
invenio_rdm_records/records/stats/templates/aggregations/aggr_record_view/__init__.py               0      0   100%
invenio_rdm_records/records/stats/templates/aggregations/aggr_record_view/os-v1/__init__.py         0      0   100%
invenio_rdm_records/records/stats/templates/aggregations/aggr_record_view/os-v2/__init__.py         0      0   100%
invenio_rdm_records/records/stats/templates/aggregations/aggr_record_view/v7/__init__.py            0      0   100%
invenio_rdm_records/records/stats/templates/events/__init__.py                                      0      0   100%
invenio_rdm_records/records/stats/templates/events/file_download/__init__.py                        0      0   100%
invenio_rdm_records/records/stats/templates/events/file_download/os-v1/__init__.py                  0      0   100%
invenio_rdm_records/records/stats/templates/events/file_download/os-v2/__init__.py                  0      0   100%
invenio_rdm_records/records/stats/templates/events/file_download/v7/__init__.py                     0      0   100%
invenio_rdm_records/records/stats/templates/events/record_view/__init__.py                          0      0   100%
invenio_rdm_records/records/stats/templates/events/record_view/os-v1/__init__.py                    0      0   100%
invenio_rdm_records/records/stats/templates/events/record_view/os-v2/__init__.py                    0      0   100%
invenio_rdm_records/records/stats/templates/events/record_view/v7/__init__.py                       0      0   100%
invenio_rdm_records/records/systemfields/__init__.py                                                8      0   100%
invenio_rdm_records/records/systemfields/access/__init__.py                                         8      0   100%
invenio_rdm_records/records/systemfields/access/access_settings.py                                 10      1    90%   33
invenio_rdm_records/records/systemfields/access/embargo.py                                         62      9    85%   24, 79-84, 91, 101, 111, 122
invenio_rdm_records/records/systemfields/access/field/__init__.py                                   3      0   100%
invenio_rdm_records/records/systemfields/access/field/parent.py                                   112     20    82%   71, 91, 106-111, 151-152, 157-158, 162-163, 176, 211-218, 231
invenio_rdm_records/records/systemfields/access/field/record.py                                   103      5    95%   127-128, 146, 152-154
invenio_rdm_records/records/systemfields/access/grants.py                                         124     14    89%   48-50, 58, 80, 100, 125, 196, 233, 238, 248, 252, 281-282
invenio_rdm_records/records/systemfields/access/links.py                                           62     13    79%   33, 45, 51, 56, 62, 66, 70, 81, 97-98, 102-105
invenio_rdm_records/records/systemfields/access/owners.py                                          50     10    80%   33, 41, 65, 78, 82-85, 89, 93, 97
invenio_rdm_records/records/systemfields/access/protection.py                                      44      5    89%   63-64, 74, 82, 88
invenio_rdm_records/records/systemfields/deletion_status.py                                        61      4    93%   58, 62, 71, 79
invenio_rdm_records/records/systemfields/draft_status.py                                           28      3    89%   80-89
invenio_rdm_records/records/systemfields/has_draftcheck.py                                         21      0   100%
invenio_rdm_records/records/systemfields/is_verified.py                                            12      0   100%
invenio_rdm_records/records/systemfields/statistics.py                                             27      2    93%   36-37
invenio_rdm_records/records/systemfields/tombstone.py                                             126      8    94%   45, 135, 166, 175, 181, 223, 229-230
invenio_rdm_records/requests/__init__.py                                                            6      0   100%
invenio_rdm_records/requests/access/__init__.py                                                     4      0   100%
invenio_rdm_records/requests/access/models.py                                                      49      3    94%   86, 91, 126
invenio_rdm_records/requests/access/permissions.py                                                  4      0   100%
invenio_rdm_records/requests/access/requests.py                                                   112     18    84%   65-73, 81-87, 95-104, 112-117, 168, 342-349
invenio_rdm_records/requests/access/tasks.py                                                        8      2    75%   22-25
invenio_rdm_records/requests/base.py                                                                6      0   100%
invenio_rdm_records/requests/community_inclusion.py                                                53      2    96%   74, 134
invenio_rdm_records/requests/community_submission.py                                               70      2    97%   75, 217
invenio_rdm_records/requests/decorators.py                                                         18      0   100%
invenio_rdm_records/requests/entity_resolvers.py                                                   91      6    93%   65, 165, 169-170, 178, 210
invenio_rdm_records/requests/file_modification.py                                                  47     15    68%   29-40, 44, 62-68, 108-109, 120
invenio_rdm_records/requests/record_deletion.py                                                    71      5    93%   72, 120-126, 174
invenio_rdm_records/requests/user_moderation/__init__.py                                            2      0   100%
invenio_rdm_records/requests/user_moderation/actions.py                                            28     18    36%   32-50, 67-74, 89-92
invenio_rdm_records/requests/user_moderation/tasks.py                                              33     18    45%   26-37, 43-54, 60-66, 72-76
invenio_rdm_records/requests/user_moderation/utils.py                                              20     16    20%   19-48
invenio_rdm_records/resources/__init__.py                                                           4      0   100%
invenio_rdm_records/resources/args.py                                                               8      0   100%
invenio_rdm_records/resources/config.py                                                           132      0   100%
invenio_rdm_records/resources/deserializers/__init__.py                                             2      0   100%
invenio_rdm_records/resources/deserializers/errors.py                                               1      0   100%
invenio_rdm_records/resources/deserializers/rocrate/__init__.py                                    38      0   100%
invenio_rdm_records/resources/deserializers/rocrate/schema.py                                      73      1    99%   140
invenio_rdm_records/resources/errors.py                                                            22      2    91%   48, 53
invenio_rdm_records/resources/iiif.py                                                             165     36    78%   146, 155-157, 201, 210-213, 284, 298, 308, 328, 342-344, 353, 357-372, 387-401
invenio_rdm_records/resources/resources.py                                                        340     35    90%   51, 110-114, 125-132, 151-156, 171, 180-186, 193-199, 216, 247-255, 262-268, 277-282, 377-382, 511-519, 571, 632-638, 663-671, 679-687, 692-697, 705-710
invenio_rdm_records/resources/serializers/__init__.py                                              16      0   100%
invenio_rdm_records/resources/serializers/bibtex/__init__.py                                        9      0   100%
invenio_rdm_records/resources/serializers/bibtex/schema.py                                        166     11    93%   100, 104-105, 111, 304-308, 326, 341
invenio_rdm_records/resources/serializers/bibtex/schema_formats.py                                 27      0   100%
invenio_rdm_records/resources/serializers/cff/__init__.py                                           8      0   100%
invenio_rdm_records/resources/serializers/cff/schema.py                                           148     18    88%   31, 53-60, 108, 122-128, 222, 244
invenio_rdm_records/resources/serializers/codemeta/__init__.py                                      7      1    86%   22
invenio_rdm_records/resources/serializers/codemeta/schema.py                                       34     22    35%   32-53, 57-67
invenio_rdm_records/resources/serializers/csl/__init__.py                                          53      0   100%
invenio_rdm_records/resources/serializers/csl/schema.py                                            75      5    93%   87-88, 103, 117, 126
invenio_rdm_records/resources/serializers/csv/__init__.py                                           4      0   100%
invenio_rdm_records/resources/serializers/datacite/__init__.py                                     19      0   100%
invenio_rdm_records/resources/serializers/datacite/schema.py                                      593     38    94%   119-120, 134, 165, 279-284, 296, 417-432, 441, 464-468, 552-553, 585, 629-637, 767-772, 784, 1030-1031, 1063, 1109-1110
invenio_rdm_records/resources/serializers/datapackage/__init__.py                                   6      0   100%
invenio_rdm_records/resources/serializers/datapackage/schema.py                                    65      0   100%
invenio_rdm_records/resources/serializers/dcat/__init__.py                                        105     13    88%   106-117, 134, 145, 155, 191-199
invenio_rdm_records/resources/serializers/dcat/schema.py                                           45      3    93%   76-77, 93
invenio_rdm_records/resources/serializers/dublincore/__init__.py                                   12      0   100%
invenio_rdm_records/resources/serializers/dublincore/schema.py                                    115      2    98%   71, 96
invenio_rdm_records/resources/serializers/errors.py                                                 2      0   100%
invenio_rdm_records/resources/serializers/geojson/__init__.py                                       6      0   100%
invenio_rdm_records/resources/serializers/geojson/schema.py                                        12      0   100%
invenio_rdm_records/resources/serializers/iiif/__init__.py                                         15      0   100%
invenio_rdm_records/resources/serializers/iiif/schema.py                                           76      0   100%
invenio_rdm_records/resources/serializers/marcxml/__init__.py                                      13      0   100%
invenio_rdm_records/resources/serializers/marcxml/schema.py                                       291     12    96%   163-170, 186-190, 277, 292, 372
invenio_rdm_records/resources/serializers/schemaorg/__init__.py                                     7      0   100%
invenio_rdm_records/resources/serializers/schemaorg/schema.py                                     270     42    84%   40-56, 78, 81, 122, 145, 251-252, 281, 298, 337, 368, 383, 447-448, 469-479, 486-498, 528
invenio_rdm_records/resources/serializers/schemas.py                                               51      6    88%   28-29, 69-73
invenio_rdm_records/resources/serializers/signposting/__init__.py                                  19      0   100%
invenio_rdm_records/resources/serializers/signposting/schema.py                                    97      1    99%   46
invenio_rdm_records/resources/serializers/ui/__init__.py                                            6      0   100%
invenio_rdm_records/resources/serializers/ui/fields.py                                             48      3    94%   73-88
invenio_rdm_records/resources/serializers/ui/schema.py                                            252     79    69%   46, 118, 221-254, 258-278, 282-297, 312-314, 317-318, 321-322, 327, 352-353, 436-448, 457-463
invenio_rdm_records/resources/serializers/utils.py                                                 29      2    93%   58, 67
invenio_rdm_records/resources/stats/__init__.py                                                     2      0   100%
invenio_rdm_records/resources/stats/event_builders.py                                              34     26    24%   34-55, 64-90, 99-107, 112-115, 123-125
invenio_rdm_records/secret_links/__init__.py                                                        3      0   100%
invenio_rdm_records/secret_links/errors.py                                                          5      1    80%   22
invenio_rdm_records/secret_links/models.py                                                         84      3    96%   90, 121, 125
invenio_rdm_records/secret_links/permissions.py                                                     4      0   100%
invenio_rdm_records/secret_links/serializers.py                                                    41      1    98%   75
invenio_rdm_records/secret_links/signals.py                                                         6      0   100%
invenio_rdm_records/services/__init__.py                                                            8      0   100%
invenio_rdm_records/services/access/__init__.py                                                     2      0   100%
invenio_rdm_records/services/access/service.py                                                    357     60    83%   99, 137, 181, 202, 216-217, 300, 344, 378, 419, 459-477, 496-545, 568, 581-604, 624, 630, 662, 673, 762, 766, 779, 836-851, 957-958
invenio_rdm_records/services/communities/__init__.py                                                2      0   100%
invenio_rdm_records/services/communities/components.py                                             24      0   100%
invenio_rdm_records/services/communities/moderation.py                                             40      5    88%   23, 27, 31, 48, 54
invenio_rdm_records/services/communities/service.py                                               178      7    96%   72, 89, 307-308, 314, 378, 479
invenio_rdm_records/services/community_inclusion/__init__.py                                        2      0   100%
invenio_rdm_records/services/community_inclusion/service.py                                        28      2    93%   45, 59
invenio_rdm_records/services/community_records/__init__.py                                          2      0   100%
invenio_rdm_records/services/community_records/service.py                                          51      4    92%   83-84, 141-142
invenio_rdm_records/services/components/__init__.py                                                14      0   100%
invenio_rdm_records/services/components/access.py                                                  36      0   100%
invenio_rdm_records/services/components/custom_fields.py                                            4      0   100%
invenio_rdm_records/services/components/files.py                                                   21      2    90%   50-51
invenio_rdm_records/services/components/internal_notes.py                                          34      1    97%   67
invenio_rdm_records/services/components/metadata.py                                                18      0   100%
invenio_rdm_records/services/components/pids.py                                                   138      0   100%
invenio_rdm_records/services/components/record_deletion.py                                         30      1    97%   53
invenio_rdm_records/services/components/record_files.py                                             8      0   100%
invenio_rdm_records/services/components/review.py                                                  23      0   100%
invenio_rdm_records/services/components/signal.py                                                   6      0   100%
invenio_rdm_records/services/components/verified.py                                                48      2    96%   41, 47
invenio_rdm_records/services/config.py                                                            256      3    99%   296, 316-317
invenio_rdm_records/services/customizations.py                                                     31      0   100%
invenio_rdm_records/services/decorators.py                                                         13      1    92%   27
invenio_rdm_records/services/dummy.py                                                              10      3    70%   16, 32, 36
invenio_rdm_records/services/errors.py                                                             68      6    91%   53, 179, 191, 196-202
invenio_rdm_records/services/facets.py                                                             21      1    95%   98
invenio_rdm_records/services/files/__init__.py                                                      2      0   100%
invenio_rdm_records/services/files/service.py                                                      14      0   100%
invenio_rdm_records/services/generators.py                                                        215     20    91%   62, 75-80, 96, 112, 140, 173, 177, 188, 209, 248, 261, 289, 302, 328, 354, 417
invenio_rdm_records/services/github/__init__.py                                                     0      0   100%
invenio_rdm_records/services/github/metadata.py                                                    83     56    33%   22, 27-29, 41-46, 55-59, 66-68, 84-91, 103-125, 130-143, 148, 152, 156-168, 172-183
invenio_rdm_records/services/github/release.py                                                    116     85    27%   28-30, 41-73, 77-80, 85-92, 96-102, 107-119, 142-208, 217-224, 228, 236-238, 243-244, 249-250
invenio_rdm_records/services/github/utils.py                                                        4      2    50%   17-22
invenio_rdm_records/services/iiif/__init__.py                                                       2      0   100%
invenio_rdm_records/services/iiif/converter.py                                                     63     45    29%   15, 19-21, 31, 36, 44, 61-73, 79-103, 107-119
invenio_rdm_records/services/iiif/service.py                                                       74     26    65%   23-25, 30, 34-36, 91-116, 128
invenio_rdm_records/services/iiif/storage.py                                                       69     40    42%   33-38, 42, 46, 50, 69-75, 79-92, 99, 104-118, 122, 135, 139-152
invenio_rdm_records/services/iiif/tasks.py                                                         31     23    26%   21-34, 44-60
invenio_rdm_records/services/permissions.py                                                        99      0   100%
invenio_rdm_records/services/pids/__init__.py                                                       3      0   100%
invenio_rdm_records/services/pids/errors.py                                                         8      1    88%   31
invenio_rdm_records/services/pids/manager.py                                                      142      8    94%   36-37, 83, 168, 203, 229, 276-277
invenio_rdm_records/services/pids/providers/__init__.py                                             5      0   100%
invenio_rdm_records/services/pids/providers/base.py                                                80      8    90%   41, 46, 85, 102-106, 119
invenio_rdm_records/services/pids/providers/datacite.py                                           145     22    85%   57, 70, 167, 173, 180-186, 212-218, 221, 229-231, 245-251, 296-297
invenio_rdm_records/services/pids/providers/external.py                                            46      2    96%   36, 69
invenio_rdm_records/services/pids/providers/oai.py                                                 15      0   100%
invenio_rdm_records/services/pids/service.py                                                      103     15    85%   84-85, 88, 92-93, 125-131, 143-150, 272
invenio_rdm_records/services/pids/tasks.py                                                          6      0   100%
invenio_rdm_records/services/queryparser.py                                                         5      3    40%   15-17
invenio_rdm_records/services/request_policies.py                                                  105     26    75%   29, 33, 101-102, 108-109, 113-117, 128-130, 134, 171, 182, 205-212, 221-227
invenio_rdm_records/services/requests/__init__.py                                                   2      0   100%
invenio_rdm_records/services/requests/service.py                                                   14      7    50%   25, 38-49
invenio_rdm_records/services/result_items.py                                                      100     16    84%   23-25, 49, 68, 89, 146, 154-156, 164, 193, 214-217
invenio_rdm_records/services/results.py                                                            57     20    65%   33, 37, 41, 45, 58, 62, 66-75, 79, 123-124, 128-137, 141
invenio_rdm_records/services/review/__init__.py                                                     2      0   100%
invenio_rdm_records/services/review/links.py                                                       10      1    90%   20
invenio_rdm_records/services/review/service.py                                                     95      3    97%   65, 136, 162
invenio_rdm_records/services/schemas/__init__.py                                                    4      0   100%
invenio_rdm_records/services/schemas/access.py                                                     41      1    98%   79
invenio_rdm_records/services/schemas/community_records.py                                          21      2    90%   48, 52
invenio_rdm_records/services/schemas/fields.py                                                     21      0   100%
invenio_rdm_records/services/schemas/files.py                                                      52      0   100%
invenio_rdm_records/services/schemas/metadata.py                                                  179      8    96%   143, 210-214, 251, 255
invenio_rdm_records/services/schemas/parent/__init__.py                                            37      2    95%   26-27
invenio_rdm_records/services/schemas/parent/access.py                                              44      0   100%
invenio_rdm_records/services/schemas/parent/communities.py                                          9      0   100%
invenio_rdm_records/services/schemas/pids.py                                                        6      0   100%
invenio_rdm_records/services/schemas/quota.py                                                       6      0   100%
invenio_rdm_records/services/schemas/record.py                                                     69      2    97%   45, 115
invenio_rdm_records/services/schemas/record_communities.py                                         24      0   100%
invenio_rdm_records/services/schemas/stats.py                                                      10      0   100%
invenio_rdm_records/services/schemas/tombstone.py                                                  21      0   100%
invenio_rdm_records/services/schemas/utils.py                                                      17     13    24%   22-38
invenio_rdm_records/services/schemas/versions.py                                                    4      0   100%
invenio_rdm_records/services/search_params.py                                                      45      5    89%   108-112
invenio_rdm_records/services/services.py                                                          303     67    78%   137, 206, 231, 239, 245, 315-352, 357-384, 396-401, 426, 434, 504-508, 594, 631-632, 637, 678-684, 699-700, 732, 753-757, 792, 827, 836, 844-849, 856-870
invenio_rdm_records/services/signals/__init__.py                                                    2      0   100%
invenio_rdm_records/services/signals/signals.py                                                     4      0   100%
invenio_rdm_records/services/sort.py                                                                8      0   100%
invenio_rdm_records/services/stats/__init__.py                                                      2      0   100%
invenio_rdm_records/services/stats/permissions.py                                                  16      8    50%   21-23, 37, 41, 53-56
invenio_rdm_records/services/tasks.py                                                              54     23    57%   55-57, 64-94
invenio_rdm_records/tokens/__init__.py                                                              3      0   100%
invenio_rdm_records/tokens/errors.py                                                               18      0   100%
invenio_rdm_records/tokens/permissions.py                                                           5      0   100%
invenio_rdm_records/tokens/resource_access.py                                                      41      4    90%   45-46, 79, 90
invenio_rdm_records/tokens/scopes.py                                                                4      0   100%
invenio_rdm_records/utils.py                                                                       90     19    79%   34-54, 76, 114-119, 140-143, 146, 152-153
invenio_rdm_records/views.py                                                                       50      4    92%   77-78, 113-119
invenio_rdm_records/webpack.py                                                                      2      0   100%
TOTAL                                                                                           12429   1963    84%
=========================== short test summary info ============================
FAILED tests/requests/test_user_moderation_actions.py::test_user_moderation_approve - invenio_records_resources.services.errors.PermissionDeniedError: action_accept
FAILED tests/requests/test_user_moderation_actions.py::test_user_moderation_decline - invenio_records_resources.services.errors.PermissionDeniedError: action_decline
FAILED tests/resources/test_access_requests.py::test_access_grant_for_role - marshmallow.exceptions.ValidationError: Could not find the specified subject
FAILED tests/resources/test_draft_file_permissions.py::test_metadata_only_records_disabled - assert 403 == 200
 +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
FAILED tests/resources/test_files.py::test_files_api_flow_for_deleted_record - assert 403 == 204
 +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
FAILED tests/resources/test_files.py::test_filename_with_slash_flow_for_deleted_record_ - assert 403 == 204
 +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
FAILED tests/resources/test_media_files.py::test_list_media_files_for_deleted_record - assert 403 == 204
 +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
FAILED tests/resources/test_request_deletion.py::test_request_flow - assert 403 == 200
 +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
FAILED tests/resources/test_request_deletion.py::test_already_deleted - invenio_records_resources.services.errors.PermissionDeniedError: delete
FAILED tests/resources/test_resources.py::test_restricted_records_disabled - assert 403 == 200
 +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
FAILED tests/resources/test_resources.py::test_search_internal_notes_fields - marshmallow_utils.permissions.FieldPermissionError: internal_notes
FAILED tests/resources/test_resources_communities.py::test_restricted_record_creation - invenio_rdm_records.services.errors.CommunityRequiredError
FAILED tests/resources/test_resources_oai.py::test_create_set - assert 403 == 201
 +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
FAILED tests/resources/test_resources_oai.py::test_create_set_duplicate - assert 403 == 201
 +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
FAILED tests/resources/test_resources_oai.py::test_create_set_invalid_data - assert 403 == 400
 +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
FAILED tests/resources/test_resources_oai.py::test_get_set - assert 403 == 201
 +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
FAILED tests/resources/test_resources_oai.py::test_get_set_not_existing - assert 403 == 404
 +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
FAILED tests/resources/test_resources_oai.py::test_update_set - assert 403 == 201
 +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
FAILED tests/resources/test_resources_oai.py::test_update_set_invalid_data - assert 403 == 201
 +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
FAILED tests/resources/test_resources_oai.py::test_delete_set - assert 403 == 201
 +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
FAILED tests/resources/test_resources_oai.py::test_delete_set_not_existing - assert 403 == 404
 +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
FAILED tests/resources/test_resources_oai.py::test_search_sets - assert 403 == 201
 +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
FAILED tests/resources/test_resources_oai.py::test_search_metadata_formats - assert 403 == 200
 +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
FAILED tests/resources/test_resources_oai.py::test_links - assert 403 == 201
 +  where 403 = <WrapperTestResponse streamed [403 FORBIDDEN]>.status_code
FAILED tests/services/components/test_verified_component.py::test_unverified_content - assert 0 == 1
 +  where 0 = <invenio_requests.services.requests.results.RequestList object at 0x7fc3dc28bb60>.total
FAILED tests/services/files/test_zip_listing_extraction.py::test_zip_file_listing - marshmallow.exceptions.ValidationError: Missing uploaded files. To disable files for this record please mark it as metadata-only
FAILED tests/services/test_service_access.py::test_cant_create_multiple_grants_for_same_role - marshmallow.exceptions.ValidationError: Could not find the specified subject
FAILED tests/services/test_service_access.py::test_read_grant_by_subjectid_provide_role - marshmallow.exceptions.ValidationError: Could not find the specified subject
FAILED tests/services/test_service_access.py::test_delete_grant_by_subjectid_provide_role - marshmallow.exceptions.ValidationError: Could not find the specified subject
FAILED tests/services/test_service_access.py::test_read_all_grants_by_subject_found - marshmallow.exceptions.ValidationError: Could not find the specified subject
FAILED tests/services/test_service_access.py::test_read_all_grants_by_subject_not_found - marshmallow.exceptions.ValidationError: Could not find the specified subject
FAILED tests/services/test_service_access.py::test_update_grant_by_subject_not_found - marshmallow.exceptions.ValidationError: Could not find the specified subject
ERROR tests/services/files/test_zip_listing_extraction.py::test_zip_file_extraction - sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_accounts_role_name"
DETAIL:  Key (name)=(administration-access) already exists
[SQL: INSERT INTO accounts_role (id, name, description, is_managed, version_id, created, updated) VALUES (%(id)s, %(name)s, %(description)s, %(is_managed)s, %(version_id)s, %(created)s, %(updated)s)]
[parameters: {'id': 'bdfa3030-76ae-44e0-b853-10a70461ef8f', 'name': 'administration-access', 'description': None, 'is_managed': True, 'version_id': 1, 'created': datetime.datetime(2026, 2, 17, 12, 54, 21, 406417, tzinfo=datetime.timezone.utc), 'updated': datetime.datetime(2026, 2, 17, 12, 54, 21, 406420, tzinfo=datetime.timezone.utc)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
ERROR tests/services/files/test_zip_listing_extraction.py::test_zip_folder_extraction - sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_accounts_role_name"
DETAIL:  Key (name)=(administration-access) already exists
[SQL: INSERT INTO accounts_role (id, name, description, is_managed, version_id, created, updated) VALUES (%(id)s, %(name)s, %(description)s, %(is_managed)s, %(version_id)s, %(created)s, %(updated)s)]
[parameters: {'id': 'bdfa3030-76ae-44e0-b853-10a70461ef8f', 'name': 'administration-access', 'description': None, 'is_managed': True, 'version_id': 1, 'created': datetime.datetime(2026, 2, 17, 12, 54, 21, 406417, tzinfo=datetime.timezone.utc), 'updated': datetime.datetime(2026, 2, 17, 12, 54, 21, 406420, tzinfo=datetime.timezone.utc)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR tests/services/files/test_zip_listing_extraction.py::test_large_zip_folder_extraction - sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_accounts_role_name"
DETAIL:  Key (name)=(administration-access) already exists
[SQL: INSERT INTO accounts_role (id, name, description, is_managed, version_id, created, updated) VALUES (%(id)s, %(name)s, %(description)s, %(is_managed)s, %(version_id)s, %(created)s, %(updated)s)]
[parameters: {'id': 'bdfa3030-76ae-44e0-b853-10a70461ef8f', 'name': 'administration-access', 'description': None, 'is_managed': True, 'version_id': 1, 'created': datetime.datetime(2026, 2, 17, 12, 54, 21, 406417, tzinfo=datetime.timezone.utc), 'updated': datetime.datetime(2026, 2, 17, 12, 54, 21, 406420, tzinfo=datetime.timezone.utc)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR tests/services/files/test_zip_listing_extraction.py::test_large_zip_memory_usage - sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_accounts_role_name"
DETAIL:  Key (name)=(administration-access) already exists
[SQL: INSERT INTO accounts_role (id, name, description, is_managed, version_id, created, updated) VALUES (%(id)s, %(name)s, %(description)s, %(is_managed)s, %(version_id)s, %(created)s, %(updated)s)]
[parameters: {'id': 'bdfa3030-76ae-44e0-b853-10a70461ef8f', 'name': 'administration-access', 'description': None, 'is_managed': True, 'version_id': 1, 'created': datetime.datetime(2026, 2, 17, 12, 54, 21, 406417, tzinfo=datetime.timezone.utc), 'updated': datetime.datetime(2026, 2, 17, 12, 54, 21, 406420, tzinfo=datetime.timezone.utc)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR tests/services/files/test_zip_listing_extraction.py::test_zip_listing_resource - sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_accounts_role_name"
DETAIL:  Key (name)=(administration-access) already exists
[SQL: INSERT INTO accounts_role (id, name, description, is_managed, version_id, created, updated) VALUES (%(id)s, %(name)s, %(description)s, %(is_managed)s, %(version_id)s, %(created)s, %(updated)s)]
[parameters: {'id': 'bdfa3030-76ae-44e0-b853-10a70461ef8f', 'name': 'administration-access', 'description': None, 'is_managed': True, 'version_id': 1, 'created': datetime.datetime(2026, 2, 17, 12, 54, 21, 406417, tzinfo=datetime.timezone.utc), 'updated': datetime.datetime(2026, 2, 17, 12, 54, 21, 406420, tzinfo=datetime.timezone.utc)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR tests/services/files/test_zip_listing_extraction.py::test_zip_file_extract_resource - sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_accounts_role_name"
DETAIL:  Key (name)=(administration-access) already exists
[SQL: INSERT INTO accounts_role (id, name, description, is_managed, version_id, created, updated) VALUES (%(id)s, %(name)s, %(description)s, %(is_managed)s, %(version_id)s, %(created)s, %(updated)s)]
[parameters: {'id': 'bdfa3030-76ae-44e0-b853-10a70461ef8f', 'name': 'administration-access', 'description': None, 'is_managed': True, 'version_id': 1, 'created': datetime.datetime(2026, 2, 17, 12, 54, 21, 406417, tzinfo=datetime.timezone.utc), 'updated': datetime.datetime(2026, 2, 17, 12, 54, 21, 406420, tzinfo=datetime.timezone.utc)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR tests/services/files/test_zip_listing_extraction.py::test_zip_folder_extract_resource - sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_accounts_role_name"
DETAIL:  Key (name)=(administration-access) already exists
[SQL: INSERT INTO accounts_role (id, name, description, is_managed, version_id, created, updated) VALUES (%(id)s, %(name)s, %(description)s, %(is_managed)s, %(version_id)s, %(created)s, %(updated)s)]
[parameters: {'id': 'bdfa3030-76ae-44e0-b853-10a70461ef8f', 'name': 'administration-access', 'description': None, 'is_managed': True, 'version_id': 1, 'created': datetime.datetime(2026, 2, 17, 12, 54, 21, 406417, tzinfo=datetime.timezone.utc), 'updated': datetime.datetime(2026, 2, 17, 12, 54, 21, 406420, tzinfo=datetime.timezone.utc)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR tests/services/files/test_zip_listing_extraction.py::test_zip_folder_extract_resource - sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_accounts_role_name"
DETAIL:  Key (name)=(administration-access) already exists
[SQL: INSERT INTO accounts_role (id, name, description, is_managed, version_id, created, updated) VALUES (%(id)s, %(name)s, %(description)s, %(is_managed)s, %(version_id)s, %(created)s, %(updated)s)]
[parameters: {'id': 'bdfa3030-76ae-44e0-b853-10a70461ef8f', 'name': 'administration-access', 'description': None, 'is_managed': True, 'version_id': 1, 'created': datetime.datetime(2026, 2, 17, 12, 54, 21, 406417, tzinfo=datetime.timezone.utc), 'updated': datetime.datetime(2026, 2, 17, 12, 54, 21, 406420, tzinfo=datetime.timezone.utc)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
= 32 failed, 763 passed, 17 skipped, 823 warnings, 8 errors in 961.59s (0:16:01) =
 Container docker_services_cli-redis-1  Stopping
 Container docker_services_cli-rabbitmq-1  Stopping
 Container docker_services_cli-opensearch-1  Stopping
 Container docker_services_cli-postgresql-1  Stopping
 Container docker_services_cli-redis-1  Stopped
 Container docker_services_cli-redis-1  Removing
 Container docker_services_cli-redis-1  Removed
 Container docker_services_cli-opensearch-1  Stopped
 Container docker_services_cli-opensearch-1  Removing
 Container docker_services_cli-opensearch-1  Removed
 Container docker_services_cli-postgresql-1  Stopped
 Container docker_services_cli-postgresql-1  Removing
 Container docker_services_cli-postgresql-1  Removed
 Container docker_services_cli-rabbitmq-1  Stopped
 Container docker_services_cli-rabbitmq-1  Removing
 Container docker_services_cli-rabbitmq-1  Removed
 Network docker_services_cli_default  Removing
 Network docker_services_cli_default  Removed
